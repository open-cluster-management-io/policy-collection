# Policies -- Community
Policies in this folder are organized by [NIST Special Publication 800-53](https://nvd.nist.gov/800-53). NIST SP 800-53 Rev 5 also includes the list of controls in [Security and Privacy Controls for Information Systems and Organizations](https://csrc.nist.gov/CSRC/media/Projects/risk-management/800-53%20Downloads/800-53r5/SP_800-53_v5_1-derived-OSCAL.pdf).

## Table of Contents

- [Policy catalog (grouped by security control)](#security-control-catalog)
- [Deploying community policies to your cluster](#deploying-community-policies-to-your-cluster)
  - [Custom policy controllers](#custom-policy-controllers)
  - [Policy consumers on operator hub](#policy-consumers-on-operator-hub)

## Security control catalog

- [Policies -- Community](#policies----community)
  - [Table of Contents](#table-of-contents)
  - [Security control catalog](#security-control-catalog)
    - [Access Control](#access-control)
    - [Awareness and Training](#awareness-and-training)
    - [Audit and Accountability](#audit-and-accountability)
    - [Security Assessment and Authorization](#security-assessment-and-authorization)
    - [Configuration Management](#configuration-management)
    - [Contingency Planning](#contingency-planning)
    - [Identification and Authentication](#identification-and-authentication)
    - [Incident Response](#incident-response)
    - [Maintenance](#maintenance)
    - [Media Protection](#media-protection)
    - [Physical and Environmental Protection](#physical-and-environmental-protection)
    - [Planning](#planning)
    - [Personnel Security](#personnel-security)
    - [Risk Assessment](#risk-assessment)
    - [System and Services Acquisition](#system-and-services-acquisition)
    - [System and Communications Protection](#system-and-communications-protection)
    - [System and Information Integrity](#system-and-information-integrity)
    - [Templatized Policies](#templatized-policies)
  - [Deploying community policies to your cluster](#deploying-community-policies-to-your-cluster)
    - [Custom policy controllers](#custom-policy-controllers)
    - [Policy consumers on operator hub](#policy-consumers-on-operator-hub)
    - [Other custom policy consumers](#other-custom-policy-consumers)

### Access Control

Policy  | Description                                                                                                                                                                                                            | Prerequisites
------- |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| -------------
[Disallowed roles policy](./AC-Access-Control/policy-roles-no-wildcards.yaml) | Use the disallowed roles policy to make sure no pods are being granted full access in violation of least privilege.                                                                                                    | Check [Using RBAC Authorization](https://kubernetes.io/docs/reference/access-authn-authz/rbac/) to learn more about Kubernetes RBAC authorization.
[Disallowed anonymous authentication](./AC-Access-Control/policy-gatekeeper-disallow-anonymous.yaml) | Use the disallowed anonymous authentication policy to make sure that the system:anonymous user and system:unauthenticated group are not associated with any ClusterRole / Role in the environment                      | See the [Gatekeeper documentation](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy.
[Configure RBAC for Application workloads ](./AC-Access-Control/policy-configure-appworkloads-rbac-sample.yaml) | Use this policy to configure a role based access control model for application workloads running on managed-clusters. This is a sample policy.                                                                         | This sample policy must be modified for your environment. Check [Using RBAC Authorization](https://kubernetes.io/docs/reference/access-authn-authz/rbac/) to learn more about Kubernetes RBAC authorization.
[Configure RBAC for Administering  policies ](./AC-Access-Control/policy-rbac-adminiterpolicies-sample.yaml) | Use this policy to configure a role based access control model on the hub for administering policies in a multi team environment.                                                                                      | Check [Using RBAC Authorization](https://kubernetes.io/docs/reference/access-authn-authz/rbac/) to learn more about Kubernetes RBAC authorization.
[Configure RBAC using groups in openshift for hub and managed clusters using admin and view-only roles ](./AC-Access-Control/policy-configure-clusterlevel-rbac.yaml) | Use this policy to configure a role based access control model on the hub to have a view-only access to desired managed clusters along with admin access to hub cluster based on groups to which the users belongs to. |  This sample policy must be modified for your environment, Check [Using RBAC Authorization](https://kubernetes.io/docs/reference/access-authn-authz/rbac/)  to learn more about Kubernetes RBAC authorization.

### Awareness and Training

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Audit and Accountability

Policy  | Description | Prerequisites
------- | ----------- | -------------
[Example of configuring audit logging with a policy](./AU-Audit-and-Accountability/policy-openshift-audit-logs-sample.yaml) | Use `policy-openshift-audit-logs-sample.yaml` policy to configure audit logging in your OpenShift cluster. For example, you can deploy the policy to configure Elasticsearch to store the audit logs data and view them on Kibana console. | See the [OpenShift Documentation](https://docs.openshift.com/container-platform/latest/logging/cluster-logging.html). This policy is only valid for OpenShift 4.6.x and needs to be adjusted for the proper environment.

### Security Assessment and Authorization

Policy  | Description | Prerequisites
------- | ----------- | -------------
[Install Upstream Compliance Operator policy](./CA-Security-Assessment-and-Authorization/policy-compliance-operator-install-upstream.yaml) | Use the upstream compliance operator installation, `policy-comp-operator` policy, to enable continuous compliance monitoring for your cluster. After you install this operator, you must select what benchmark you want to comply to, and create the appropriate objects for the scans to be run. | See [Compliance Operator](https://github.com/openshift/compliance-operator) for more details.
[Check Fips-Compliance](./CA-Security-Assessment-and-Authorization/policy-check-fips.yaml) | Use this policy to check if a Cluster has FIPS-Compliance-Enabled. | This policy is only valid for OpenShift 4.6+. Read [here](https://docs.openshift.com/container-platform/latest/installing/installing-fips.html) for more information
[Remove Kubeadmin](./SC-System-and-Communications-Protection/policy-remove-kubeadmin.yaml) | Use this policy to remove the Kubeadmin-User from selected Clusters | This policy is only valid for OpenShift 4.x Clusters

### Configuration Management

Policy  | Description | Prerequisites
------- | ----------- | -------------
[Upgrade OpenShift-Cluster Sample policy](./CM-Configuration-Management/policy-upgrade-openshift-cluster.yaml) | Use this policy as an example for upgrading OpenShift clusters with a policy. | OpenShift 4.x is required. In the provided example, a version 4.12 cluster is upgraded to version 4.12.17. Change the `channel` and the `desired version` if you want to upgrade other versions. The `desired version.image` field can be omitted if the target cluster has never been upgraded or was upgraded to a version that clears the field after a successful upgrade (some older versions do not). `oc adm upgrade` will list available version/image pairs in the current upgrade channel (the image used in the example is for OpenShift 4.12.17 on x86_64). If the `version` and `image` are mismatched, the `image` will take precedence.
[Egress sample policy](./CM-Configuration-Management/policy-egress-firewall-sample.yaml) | With the egress firewall you can define rules (per-project) to allow or deny traffic (TCP-or UDP) to the external network. | OpenShift 4.x is required. See the [OpenShift Security Guide.](https://access.redhat.com/articles/5059881) Use the OpenShift Security Guide to secure your OpenShift cluster.
[Example of configuring a cluster-wide proxy with a policy](./CM-Configuration-Management/policy-cluster-proxy-sample.yaml) | Use this policy to configure a cluster-wide proxy. | OpenShift 4.x is required. See the [OpenShift Documentation.](https://docs.openshift.com/container-platform/latest/security/encrypting-etcd.html) This policy is only valid for OpenShift 4.x and needs to be adjusted for the proper environment. You should not include passwords in a policy. Use the [templatized policy feature](https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.6/html/governance/governance#support-templates-in-config-policies) to avoid including the proxy password in the policy.
[Example of configuring DNS with a policy](./CM-Configuration-Management/policy-cluster-dns-sample.yaml) | Use this policy to configure DNS in your OpenShift cluster. For example, you can remove public DNS. | OpenShift 4.x is required. See the [OpenShift Documentation](https://docs.openshift.com/container-platform/latest/post_installation_configuration/network-configuration.html#private-clusters-setting-dns-private_post-install-network-configuration) This policy is only valid for OpenShift 4.x and needs to be adjusted for the proper environment.
[Example of configuring the Cluster Network Operator with a policy](./CM-Configuration-Management/policy-cluster-network-sample.yaml) | Use this policy to configure the network of your OpenShift cluster. | OpenShift 4.x is required. See the [OpenShift Documentation.](https://docs.openshift.com/container-platform/latest/post_installation_configuration/network-configuration.html#nw-operator-cr_post-install-network-configuration) This policy is only valid for OpenShift 4.x and needs to be adjusted for the proper environment.
[Example of creating a deployment object](./CM-Configuration-Management/policy-nginx-deployment.yaml) | This example generates 3 replicas of \`nginx-pods\`. | See the [Kubernetes Documentation](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/) to learn more about Deployments.
[Example of creating a zts-cmc deployment object](./CM-Configuration-Management/policy-zts-cmc-deployment.yaml) | This example deploys a replica of \`zts-cmc-pod\`. | See the [Zettaset README](https://github.com/zettaset/zettaset-public/) to learn more about Zettaset CMC Deployment.
[policy-zts-xcrypt-rbac](./CM-Configuration-Management/policy-zts-xcrypt-rbac.yaml) | This example deploys RBAC for \`zts-xcrypt-deployment\`. | See the [Zettaset README.stable(https://github.com/zettaset/zettaset-public/) to learn more about Zettaset Xcrypt Deployment.
[policy-zts-xcrypt-deployment](./CM-Configuration-Management/policy-zts-xcrypt-deployment.yaml) | This example deploys \`zts-xcrypt-deployment\`. | See the [Zettaset README.stable(https://github.com/zettaset/zettaset-public/) to learn more about Zettaset Xcrypt Deployment.
[Example of a policy used to configure GitHub-Authentication](./CM-Configuration-Management/policy-github-oauth-sample.yaml) | Use this policy to log in to your OpenShift cluster with GitHub-Authentication. | OpenShift 4.x is required. See the OpenShift Documentation, [Configuring a GitHub or GitHub Enterprise identify provider](https://docs.openshift.com/container-platform/latest/authentication/identity_providers/configuring-github-identity-provider.html) to learn more information about identity providers. You must modify the contents of this policy so that it is applicable to your environment.
[Example of installing Performance Addon Operator](./CM-Configuration-Management/policy-pao-operator.yaml) | Use this policy to install the Performance Addon Operator, which provides the ability to enable advanced node performance tunings on a set of nodes. | OpenShift 4.x is required. See the [RHACM & Performance Addon Operator repository documentation](https://github.com/alosadagrande/acm-cnf/tree/master/acm-manifests/performance-operator) for more details.
[Example of installing PTP Operator](./CM-Configuration-Management/policy-ptp-operator.yaml) | Use this policy to install the Precision Time Protocol (PTP) Operator, which creates and manages the linuxptp services on a set of OpenShift nodes. | OpenShift 4.x is required. See the [RHACM & PTP Operator repository documentation](https://github.com/alosadagrande/acm-cnf/tree/master/acm-manifests/ptp) for more details.
[Example of installing the Red Hat Serverless Operator](./CM-Configuration-Management/policy-openshift-serverless.yaml) | Use this policy to install the OpenShift serverless Operator. | See the [About OpenShift Serverless](https://docs.openshift.com/container-platform/4.10/serverless/discover/about-serverless.html) for more details.
[Example of installing SR-IOV Network Operator](./CM-Configuration-Management/policy-sriov-operator.yaml) | Use this policy to install the Single Root I/O Virtualization (SR-IOV) Network Operator, which manages the SR-IOV network devices and network attachments in your clusters. | OpenShift 4.x is required. See the [RHACM & SR-IOV Network Operator repository documentation](https://github.com/alosadagrande/acm-cnf/tree/master/acm-manifests/sriov-operator) for more details.
[Example of labeling nodes of a cluster](./CM-Configuration-Management/policy-label-worker-nodes.yaml) | Use this policy to label nodes in your managed clusters. Notice you must know the name of the node or nodes to label. | OpenShift 4.x is required. See the [OpenShift Documentation](https://docs.openshift.com/container-platform/latest/nodes/nodes/nodes-nodes-working.html#nodes-nodes-working-updating_nodes-nodes-working) to learn more about labelling objects.
[Example to configure an image policy](./CM-Configuration-Management/policy-image-policy-sample.yaml) | Use the image policy to define the repositories from where OpenShift can pull images. | OpenShift 4.x is required. Refer to the chapter named *Container Image Security* in the [OpenShift Security Guide.](https://access.redhat.com/articles/5059881) for more information. You must customize the contents of this policy.
[Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml) | Use the Gatekeeper operator policy to install the community version of Gatekeeper on a managed cluster. | See the [Gatekeeper Operator](https://github.com/gatekeeper/gatekeeper-operator).
[Gatekeeper config exclude namespaces](./CM-Configuration-Management/policy-gatekeeper-config-exclude-namespaces.yaml) | Use the Gatekeeper policy to exclude namespaces from certain processes for all constraints in the cluster | See the gatekeeper documentation [exempting-namespaces-from-gatekeeper](https://open-policy-agent.github.io/gatekeeper/website/docs/exempt-namespaces) for more information. **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml).
[Gatekeeper container image with the latest tag](./CM-Configuration-Management/policy-gatekeeper-container-image-latest.yaml) | Use the Gatekeeper policy to enforce containers in deployable resources to not use images with the _latest_ tag. | See the [Gatekeeper documentation](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml).
[Gatekeeper liveness probe not set](./CM-Configuration-Management/policy-gatekeeper-container-livenessprobenotset.yaml) | Use this Gatekeeper policy to make sure pods have a [liveness probe.](https://docs.openshift.com/container-platform/latest/applications/application-health.html) | See the [Gatekeeper documentation](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml).
[Gatekeeper readiness probe not set](./CM-Configuration-Management/policy-gatekeeper-container-readinessprobenotset.yaml) | Use this Gatekeeper policy to make sure pods have a [readiness probe.](https://docs.openshift.com/container-platform/latest/applications/application-health.html) | See the [Gatekeeper documentation](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml).
[Gatekeeper allowed external IPs](./CM-Configuration-Management/policy-gatekeeper-allowed-external-ips.yaml) | Use the Gatekeeper allowed external IPs policy to define external IPs that can be specified by `Services`. | See the [Gatekeeper](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml).
[Gatekeeper sample policy](./CM-Configuration-Management/policy-gatekeeper-sample.yaml) | Use the Gatekeeper sample policy to view an example of how a gatekeeper policy can be applied to a managed cluster. This sample requires a `gatekeeper` label to be applied to a list of namespaces. | See the [Gatekeeper](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml).
[Gatekeeper mutation policy (owner annotation)](./CM-Configuration-Management/policy-gatekeeper-annotation-owner.yaml) | Use the Gatekeeper mutation policy to set the owner annotation on pods. | See the [Gatekeeper](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml). You must enable [*mutatingWebhook*](https://github.com/open-cluster-management-io/policy-collection/blob/3d6775a7ddcc007d313421c1fcc25c1fbdf28fdd/community/CM-Configuration-Management/policy-gatekeeper-operator.yaml#L111) to use the gatekeeper mutation feature.
[Gatekeeper mutation policy (image pull policy)](./CM-Configuration-Management/policy-gatekeeper-image-pull-policy.yaml) | Use the Gatekeeper mutation policy to set or update image pull policy on pods. | See the [Gatekeeper](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml). You must enable [*mutatingWebhook*](https://github.com/open-cluster-management-io/policy-collection/blob/3d6775a7ddcc007d313421c1fcc25c1fbdf28fdd/community/CM-Configuration-Management/policy-gatekeeper-operator.yaml#L111) to use the gatekeeper mutation feature.
[Gatekeeper mutation policy (termination GracePeriodSeconds)](./CM-Configuration-Management/policy-gatekeeper-container-tgps.yaml) | Use the Gatekeeper mutation policy to set or update the termination grace period seconds on pods. | See the [Gatekeeper](https://github.com/open-policy-agent/gatekeeper). **Note**: Gatekeeper controllers must be installed to use the gatekeeper policy. See the [Gatekeeper operator policy](./CM-Configuration-Management/policy-gatekeeper-operator.yaml). You must enable [*mutatingWebhook*](https://github.com/open-cluster-management-io/policy-collection/blob/3d6775a7ddcc007d313421c1fcc25c1fbdf28fdd/community/CM-Configuration-Management/policy-gatekeeper-operator.yaml#L111) to use the gatekeeper mutation feature.
[MachineConfig Chrony sample policy](./CM-Configuration-Management/policy-machineconfig-chrony.yaml) | Use the MachineConfig Chrony policy to configure _/etc/chrony.conf_ on certain machines. | OpenShift 4.x is required. For more information see, [Modifying node configurations in OpenShift 4.x blog](https://jaosorior.dev/2019/modifying-node-configurations-in-openshift-4.x/).
[Network-Policy-Samples](./CM-Configuration-Management/policy-network-policy-samples.yaml) | Use the Network policy to specify how groups of pods are allowed to communicate with each other and with other network endpoints. | See the [OpenShift Security Guide](https://access.redhat.com/articles/5059881). **Note**: The policy might be modified to the actual usecases.
[OPA sample policy](./CM-Configuration-Management/policy-opa-sample.yaml) | Use the Open Policy Agent (OPA) Sample policy to view an example of how an OPA policy can be created. You can also view an example of adding a _REGO_ script into a ConfigMap, which is evaluated by the OPA. | See the [OPA example repository](https://github.com/ycao56/mcm-opa). **Note**: OPA must be installed to use the OPA ConfigMap policy.
[Trusted Container policy](./CM-Configuration-Management/policy-trusted-container.yaml) | Use the trusted container policy to detect if running pods are using trusted images. | This policy requires a custom controller to be deployed. See the [Trusted Container Policy Controller](https://github.com/ycao56/trusted-container-policy-controller) for details on the custom controller.
[Trusted Node policy](./CM-Configuration-Management/policy-trusted-node.yaml) | Use the trusted node policy to detect if there are untrusted or unattested nodes in the cluster. | This policy requires a custom controller to be deployed. See the [Trusted Node Policy Controller](https://github.com/lumjjb/trusted-node-policy-controller) for details on the custom controller.
[ETCD Backup](./CM-Configuration-Management/policy-etcd-backup.yaml) | Use the ETCD Backup policy to receive the last six backup snapshots for etcd. This policy uses the etcd container image in the policy because it contains all required tools like etcdctl. | OpenShift 4.x is required. For more information, see [OpenShift 4 with default storage class](https://docs.openshift.com/container-platform/latest/storage/dynamic-provisioning.html).
[Integrity Shield](./CM-Configuration-Management/policy-integrity-shield.yaml)| Use the Integrity Shield to protect the integrity of Kubernetes resources in a cluster (e.g. OpenShift). | See the [Integrity Shield documentation.](https://github.com/stolostron/integrity-shield/blob/master/docs/ACM/README_ENABLE_ISHIELD_PROTECTION_ACM_ENV.md)
[Integrity Shield Events](./CM-Configuration-Management/policy-integrity-shield-events.yaml)| Use the Integrity Shield Events policy to show a status, which represents whether Integrity Shield has denied some requests in a cluster or not. | See the [Integrity Shield documentation.](https://github.com/stolostron/integrity-shield/blob/master/docs/ACM/README_SHOW_INTEGRITY_STATUS_ON_ACM_UI.md)
[Integrity Shield Observer](./CM-Configuration-Management/policy-integrity-shield-observer.yaml)| Integrity Shield Observer continuously verifies Kubernetes resource on cluster according ManifestIntegrityConstraint resources and exports the results to resources called ManifestIntegrityState. This policy is used to alert on any resource signature violations that have been identified by the observer. | This policy does not install Integrity Shield. This policy does require Integrity Shield to already be installed. See the [Integrity Shield documentation.](https://github.com/stolostron/integrity-shield/blob/master/docs/ACM/README_SHOW_INTEGRITY_STATUS_ON_ACM_UI.md)
[v1alpha2 PolicyReport failures](./CM-Configuration-Management/policy-check-policyreports.yaml)| This policy searches for any `PolicyReport` resources that contain failures in the results. | An example of a tool that creates `PolicyReports` is [Kyverno](https://kyverno.io/). Be aware that the `PolicyReports` API is an alpha API and multiple versions may be available. A policy using the `v1alpha1` API is [v1alpha1 PolicyReport failures](./CM-Configuration-Management/policy-check-reports.yaml).
[Kyverno sample policy](./CM-Configuration-Management/policy-kyverno-sample.yaml) | Use the Kyverno sample policy to view an example of how a kyverno policy can be applied to a managed cluster. This policy is evaluated by the kyverno controller on a managed cluster. This policy requires all pods to have a certain label defined. Note that you cannot create pods that do not have this label if you apply this policy. | See the [Installation instructions](https://kyverno.io/docs/installation/#install-kyverno-using-yamls) and [How to write Kyverno policies](https://kyverno.io/docs/writing-policies). **Note**: Kyverno must be installed on the managed clusters to use the Kyverno policy.
[OpenShift Kernel Configuration](./CM-Configuration-Management/policy-kernel-devel.yaml) | Use this policy to create OpenShift 4 machine configurations that install kernel development packages. The kernel development packages are needed for the Sysdig and Falco agents to integrate into the host kernel. | This policy is only valid for OpenShift 4.x.
[Volsync Persistent Data Replication](./CM-Configuration-Management/policy-persistent-data-management.yaml) | Use this policy to deploy the Volsync controller. Once the controller has been deployed, replication source and replication destination objects can be created allowing for persistent volume claims to be replicated. | See the [VolSync Replication](https://volsync.readthedocs.io) documentation for more information.
[Setup-Subscription-Admin](./CM-Configuration-Management/policy-configure-subscription-admin-hub.yaml) | Use this policy to activate the Subscription-Admin feature in RHACM | See this Solution for more information about this feature [https://access.redhat.com/solutions/6010251](https://access.redhat.com/solutions/6010251)
[Configure-Logforwarding](./CM-Configuration-Management/policy-configure-logforwarding.yaml) | Use this policy to configure Logforwarding. | OpenShift 4.x is required. See this [blog](https://www.openshift.com/blog/implement-policy-based-governance-using-configuration-management-of-red-hat-advanced-cluster-management-for-kubernetes) for more information about this example
[Install OpenShift-Update-Service](./CM-Configuration-Management/policy-update-service-openshift-cluster.yaml) | Use this policy to install the OpenShift Update Service. | This policy is only valid for OpenShift 4.6+. Read the [documentation](https://docs.openshift.com/container-platform/latest/updating/installing-update-service.html#installing-update-service) for more information
[Install OpenShift-Gitops](./CM-Configuration-Management/policy-openshift-gitops.yaml) | Use this policy to install the Red Hat OpenShift GitOps operator which can be used to install and configure Gitops, Tekton and ArgoCD | Requires OpenShift 4.x. Check the [documentation](https://docs.openshift.com/container-platform/latest/cicd/gitops/gitops-release-notes.html) for more information.
[Configure OpenShift-Gitops with the Policy Generator](./CM-Configuration-Management/policy-openshift-gitops-policygenerator.yaml) | Use this policy to configure the Red Hat OpenShift GitOps operator to run the policy generator | Requires OpenShift 4.x and requires the Openshift GitOps operator to be installed. Check the [documentation](https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.7/html/governance/governance#policy-gen-install-on-openshift-gitops) for more details.
[Configure OpenShift Image-Pruner](./CM-Configuration-Management/policy-resiliency-image-pruner.yaml) | Use this policy to configure the OpenShift Image-Pruner | OpenShift 4.x is required. Check the [documentation](https://docs.openshift.com/container-platform/latest/applications/pruning-objects.html) for more information
[Policy to configure a POD Disruption Budget](./CM-Configuration-Management/policy-engineering-pod-disruption-budget.yaml) | use this policy to configure a Pod Disruption Budget|     Check Kubernetes [documentation](https://kubernetes.io/docs/tasks/run-application/configure-pdb/) for more information
[Policy to configure a cluster autoscaler](./CM-Configuration-Management/policy-autoscaler.yaml) | Use this policy to configure a `ClusterAutoscaler`. | OpenShift 4.x is required. Check the OpenShift [documentation](https://docs.openshift.com/container-platform/latest/post_installation_configuration/cluster-tasks.html#informational-resources_post-install-cluster-tasks) for more information.
[Policy to configure Ingress Controller](./CM-Configuration-Management/policy-ingress-controller.yaml) | Use this policy to configure the IngressController |  OpenShift 4.x is required. Check the OpenShift [documentation](https://docs.openshift.com/container-platform/latest/post_installation_configuration/cluster-tasks.html#informational-resources_post-install-cluster-tasks) for more information on how to customize this policy.
[Policy to configure the Scheduler](./CM-Configuration-Management/policy-scheduler.yaml) | Use this policy to configure the OpenShift Scheduler | OpenShift 4.x is required. Check OpenShift [documentation](https://docs.openshift.com/container-platform/latest/post_installation_configuration/cluster-tasks.html#configuration-resources_post-install-cluster-tasks) for more information
[Policy to install the Red Hat Single Sign-On Operator](./CM-Configuration-Management/policy-rhsso-operator.yaml) | Use this policy to install the Red Hat Single Sign-On Operator| OpenShift 4.x is required. Check the [documentation](https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_installation_and_configuration_guide/operator) for more information
[Policy to install External-Secrets](./CM-Configuration-Management/policy-install-external-secrets.yaml) | Use this policy to install External Secrets. Kubernetes External Secrets allows you to use external secret management systems, like AWS Secrets Manager or HashiCorp Vault, to securely add secrets in Kubernetes. | Check the [documentation](https://github.com/external-secrets/kubernetes-external-secrets) and this [solution](https://access.redhat.com/solutions/6184721) for more information.
[Policy to install the Red Hat Advanced Cluster Security Central Server](./CM-Configuration-Management/policy-acs-operator-central.yaml) | Use this policy to install the Red Hat Advanced Cluster Security operator to the Open Cluster Management hub and install the Central Server to the `stackrox` namespace. | OpenShift 4.x is required. For more information on Red Hat Advanced Cluster Security, visit [Red Hat Advanced Cluster Security for Kubernetes](https://www.openshift.com/products/kubernetes-security)
[Policy to install the Red Hat Advanced Cluster Security Secure Cluster Services](./CM-Configuration-Management/policy-acs-operator-secured-clusters.yaml) | Use this policy to install the Red Hat Advanced Cluster Security operator to all OpenShift managed clusters and install the Secure Cluster Services to the `stackrox` namespace. | OpenShift 4.x is required. For more information on Red Hat Advanced Cluster Security, visit [Red Hat Advanced Cluster Security for Kubernetes](https://www.openshift.com/products/kubernetes-security). This policy requires policy template support to be available in Open Cluster Management. See [advanced-cluster-security](https://github.com/stolostron/advanced-cluster-security) for additional prerequisites needed for installing this policy.
[Policy to install `cert-manager`](./CM-Configuration-Management/policy-cert-manager-operator.yaml) | Use this policy to deploy the community operator for `cert-manager` which installs `cert-manager` on OpenShift clusters. | For more information on `cert-manager` visit [Cloud native certificate management](https://cert-manager.io/)
[Policy to label a Managed-Cluster](./CM-Configuration-Management/policy-label-cluster.yaml) | Use this policy to label a Managed-Cluster | Open Cluster Management is required. This policy needs to be applied on the Managing-Cluster, adjust the labels to your needs
[Policy to set a Config-Map with properties for different environments](./CM-Configuration-Management/policy-engineering-configmap.yaml) | Use this policy to configure a policy for different environments | Adjust this example for your needs
[Policy to install Local Storage Operator](./CM-Configuration-Management/policy-local-storage-operator.yaml) | Use this policy to install and configure the Local Storage Operator | Add the `LocalVolumeSet` and `LocalVolume` resources to your policy as necessary for your needs
[Policy to define a Custom CatalogSource](./CM-Configuration-Management/policy-custom-catalog.yaml) | Use this policy to configure or patch a Custom CatalogSource | OpenShift 4.x is required. Consult the [documentation](https://docs.openshift.com/container-platform/latest/operators/admin/olm-managing-custom-catalogs.html) for more information
[Policy to install the ansible-awx-operator](./CM-Configuration-Management/policy-ansible-awx-operator.yaml) | Use this policy to configure the `ansible-awx-operator` to allow `AnsibleJobs` to be processed. | **Archived**: This policy is needed for Ansible integration on OpenShift 4.8 and older. Use the [Ansible Automation Platform operator](./CM-Configuration-Management/policy-automation-operator.yaml) policy as a replacement for this operator.
[Policy to install the Ansible Automation Platform operator](./CM-Configuration-Management/policy-automation-operator.yaml) | Use this policy to install Ansible Automation Platform operator, automation hub and controller | Requires OpenShift 4.x. This operator is needed to process `AnsibleJobs`. See the [Red Hat Ansible Automation Platform](https://red.ht/AAP-20) for more details.
[Policy to configure ClusterLogForwarding using Template-Feature](./CM-Configuration-Management/policy-cluster-logforwarder-templatized.yaml) | Use this policy to configure ClusterLogForwarding to send audit logs to a Kafka-Topic. | Every Cluster gets it's own topic because of the new Templatized-Feature. To validate the configuration, run the following command: ```oc get ClusterLogForwarder instance -n openshift-logging -oyaml```. The minimum prerequisites are OpenShift 4.6 and Open Cluster Management 0.7.0
[Policy to add OpenShift APIs for Data Protection (OADP)](./CM-Configuration-Management/policy-oadp.yaml) | Use this policy to install the OADP operator and data protection application (DPA) | A cloud-credentials secret should be created with credentials for the S3 bucket. Review [documentation](https://access.redhat.com/documentation/en-us/openshift_container_platform/4.10/html-single/backup_and_restore/index "https://access.redhat.com/documentation/en-us/openshift_container_platform/4.10/html-single/backup_and_restore/index") for more information.
[Policy to setup ODF](./CM-Configuration-Management/policy-odf.yaml) | Use this policy to install and configure the OpenShift Data Foundation | making it work would require e.g. on AWS m5 instances would be required. Requires OpenShift 4.6 or later.
[Policy to install Kyverno's Helm Chart](./CM-Configuration-Management/policy-install-kyverno.yaml) | Use this policy to install Kyverno | Consult [Kyverno on GitHub](https://github.com/kyverno) to get more information about Kyverno.
[Policy to install Kyverno operator](./CM-Configuration-Management/policy-kyverno-operator.yaml) | Use this policy to install Kyverno's OLM Operator on OpenShift | Consult [Kyverno on GitHub](https://github.com/kyverno) to get more information about Kyverno.
[Kyverno config exclude resources](./CM-Configuration-Management/policy-kyverno-config-exclude-resources.yaml) | Use this Kyverno policy to exclude resources from certain processes for all constraints in the cluster | See the [Resource Filters](https://kyverno.io/docs/installation/#resource-filters) from the Kyverno documentation. **Note**: Kyverno controller must be installed to use the kyverno policy. See [Policy to install Kyverno](./CM-Configuration-Management/policy-install-kyverno.yaml).
[Kyverno mutation policy (image pull policy)](./CM-Configuration-Management/policy-kyverno-image-pull-policy.yaml) | Use the Kyverno mutation policy to set or update the image pull policy on pods | See the [Kyverno project](https://github.com/kyverno/kyverno). **Note**: Kyverno controller must be installed to use the kyverno policy. See the [Policy to install Kyverno](./CM-Configuration-Management/policy-install-kyverno.yaml).
[Kyverno mutation policy (termination GracePeriodSeconds)](./CM-Configuration-Management/policy-kyverno-container-tgps.yaml) | Use the Kyverno mutation policy to set or update the termination grace period seconds on pods | See the [Kyverno project](https://github.com/kyverno/kyverno). **Note**: Kyverno controller must be installed to use the kyverno policy. See the [Policy to install Kyverno](./CM-Configuration-Management/policy-install-kyverno.yaml).
[Policy to install ArgoCD on Non-OpenShift Clusters](./CM-Configuration-Management/policy-argocd-kubernetes.yaml) | Use this policy to install ArgoCD on Kubernetes. | This policy deploys ArgoCD as a Helm Chart and can be applied to non OpenShift clusters.
[Policy to create a CronJob installing oc-client](./CM-Configuration-Management/policy-oc-client-cronjob.yaml) | Use this policy to execute custom commands using oc-client | There are several examples where you might need to setup custom commands. You must customize the commands you want to run in the policy. To learn more visit [Kubernetes CronJob documentation](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/)
[Scan your cluster with the OpenShift Moderate security profile](./CM-Configuration-Management/policy-compliance-operator-moderate-scan.yaml) | This example creates a `ScanSettingBinding` that the Compliance Operator uses to scan the cluster for compliance with the OpenShift FedRAMP Moderate benchmark. | The Compliance Operator can only scan OpenShift nodes. For more details, visit: [Understanding the Compliance Operator](https://docs.openshift.com/container-platform/latest/security/compliance_operator/compliance-operator-understanding.html).
[Scan your cluster with the OpenShift High security profile](./CM-Configuration-Management/policy-compliance-operator-high-scan.yaml) | This example creates a `ScanSettingBinding` that the Compliance Operator uses to scan the cluster for compliance with the OpenShift NIST 800-53 High benchmark. | The Compliance Operator can only scan OpenShift nodes. For more details, visit: [Understanding the Compliance Operator](https://docs.openshift.com/container-platform/latest/security/compliance_operator/compliance-operator-understanding.html).
[Scan your cluster with the OpenShift PCI-DSS security profile](./CM-Configuration-Management/policy-compliance-operator-pci-dss-scan.yaml) | This example creates a `ScanSettingBinding` that the Compliance Operator uses to scan the cluster for compliance with the PCI-DSS v3.2.1 Control Baseline for Red Hat OpenShift Container Platform 4. | The Compliance Operator can only scan OpenShift nodes. For more details, visit: [Understanding the Compliance Operator](https://docs.openshift.com/container-platform/latest/security/compliance_operator/compliance-operator-understanding.html).
[Scan your cluster with the OpenShift NERC-CIP security profile](./CM-Configuration-Management/policy-compliance-operator-nerc-cip-scan.yaml) | This example creates a `ScanSettingBinding` that the Compliance Operator uses to scan the cluster for compliance with the North American Electric Reliability Corporation (NERC) Critical Infrastructure benchmark. | The Compliance Operator can only scan OpenShift nodes. For more details, visit: [Understanding the Compliance Operator](https://docs.openshift.com/container-platform/latest/security/compliance_operator/compliance-operator-understanding.html).
[Scan control plane components of HyperShift hosted cluster using tailored CIS Benchmark for OpenShift profile](./CM-Configuration-Management/policy-compliance-operator-hypershift-hosted-cluster.yaml) | This example creates a `TailoredProfile` designed to scan control plane components of a HyperShift hosted cluster in addition to `ScanSetting` and `ScanSettingBinding` to invoke a scan using the `TailoredProfile`. | The Compliance Operator can only scan OpenShift nodes. For more details, visit: [Understanding the Compliance Operator](https://docs.openshift.com/container-platform/latest/security/compliance_operator/compliance-operator-understanding.html).
[Policy to customize OpenShift OAuth tokens](./CM-Configuration-Management/policy-oauth-config.yaml) | Use this policy to configure the OpenShift tokens to expire after a set period of inactivity. | OpenShift 4.x is required. For more information on configuring the OAuth clients, see the OpenShift documentation: [Configurating the internal oauth Server](https://docs.openshift.com/container-platform/latest/authentication/configuring-internal-oauth.html)
[Policy to install IDP operator](./CM-Configuration-Management/policy-idp-operator.yaml) | Use this policy to install Identity configuration management operator. | For more information on this operator, see the [IDP documentation](https://identitatem.github.io/idp-mgmt-docs/). NOTE: See the [IDP requirements and recommendations](https://identitatem.github.io/idp-mgmt-docs/requirements.html#requirements-and-recommendations) before using this policy.
[Policy to configure Github identity provider in IDP ](./CM-Configuration-Management/policy-idp-sample-github.yaml) | Use this policy to apply Github OAuth to managed clusters through IDP . | For more information on this operator, see the IDP documentation: [Identity configuration management for Kubernetes](https://identitatem.github.io/idp-mgmt-docs/). NOTE: IDP Operator must be installed before using this policy.
[Policy to install the OpenShift File Integrity operator](./CM-Configuration-Management/policy-file-integrity-operator.yaml) | Use the *File Integrity Operator* to continually run file integrity checks on the cluster nodes. This policy becomes `NonCompliant` when a `FileIntegrityNodeStatus` returns a status of `Failed`, which indicates files on the nodes have changed. | OpenShift 4.x is required. See [Understanding the File Integrity Operator](https://docs.openshift.com/container-platform/latest/security/file_integrity_operator/file-integrity-operator-understanding.html) for more details.
[Policy to install AWS MachineSets on OpenShift](./CM-Configuration-Management/policy-aws-machine-sets.yaml) | This policy creates 3 OpenShift MachineSets that are intended for installing OpenShift Cluster Storage on AWS. | OpenShift 4.x is required. These MachineSets also require AWS and contain image IDs that are specific to OpenShift 4.9. Update the AMI ids in the policy prior to use.  See the comments in the policy for additional details.
[Policy to install RHODA Operator on OpenShift](./CM-Configuration-Management/policy-rhoda-operator.yaml) | This policy creates Red Hat OpenShift Database Access Operator on managed clusters and hub clusters allow users to onnect to managed databases from their apps deployed in OpenShift. | OpenShift 4.10 is required. Consult the [documentation](https://access.redhat.com/documentation/en-us/red_hat_openshift_database_access/1/html-single/quick_start_guide/index) for more information
[Policy to install and configure the ODF LVM Operator](./CM-Configuration-Management/policy-lvm-operator.yaml) | Use this policy to install and configure the Openshift Data Foundation LVM Operator | Requires OpenShift 4.10 or later. Nodes must have additional disks that will be used to provide storage.
[Policy to configure a `ManagedClusterSetBinding`](./CM-Configuration-Management/policy-managedclustersetbinding.yaml) | Use this policy to create a namespace named `policies` and bind it to the `ClusterSet` named `default`. This allows policies created in that namespace to use the cluster placement with any managed clusters in the default cluster set. | This policy should only be placed on the hub cluster.
[Policy to install the Red Hat Web Terminal Operator](./CM-Configuration-Management/policy-web-terminal-operator.yaml) | OpenShift 4.10 or newer is required. See [About the web terminal in the web console](https://docs.openshift.com/container-platform/4.10/web_console/odc-about-web-terminal.html) for more details.
[Policy to configure proxy protocol](./CM-Configuration-Management/policy-proxy-protocol.yaml) | See [Configuring the PROXY protocol](https://docs.openshift.com/container-platform/4.10/networking/ingress-operator.html#nw-ingress-controller-configuration-proxy-protocol_configuring-ingress) for more details.
[Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml) | Use this policy to install Triliovault for Kubernetes Operator and a trial license on Openshift clusters with label "protected-by=triliovault" | Requires OpenShift 4.8 or later. Needs CSI Driver with snapshot capabilities, storageClass and volumeSnapshotClass. For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/getting-started#prerequisites-for-tvk)
[Policy to create namespace based backup using Triliovault for Kubernetes](./CM-Configuration-Management/policy-create-ns-backup-triliovault-for-kubernetes.yaml) | Use this policy to create namespace based backup using Triliovault for Kubernetes on Openshift clusters with label "protected-by=triliovault" | Requires OpenShift 4.8 or later. **Note**: Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). On the hub cluster, create a secret "aws-s3-secret" with S3 credentials and a configmap "aws-s3-configmap" with S3 bucket name, region name, thresholdCapacity & namespace name for backup in the namespace on the hub cluster where this policy is created (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/getting-started#prerequisites-for-tvk)
[Policy to create namespace based backup using Triliovault for Kubernetes and kyverno template](./CM-Configuration-Management/policy-create-ns-backup-triliovault-for-kubernetes-templatized.yaml) | Use this policy to create namespace based backup using Triliovault for Kubernetes and kyverno template on Openshift clusters with label "protected-by=triliovault". It creates backup of the namespaces having a label "protected-by=tvk-ns-backup" | Requires OpenShift 4.8 or later. **Note**: Kyverno controller must be installed to use the kyverno policy. See the [Policy to install Kyverno](./CM-Configuration-Management/policy-install-kyverno.yaml). Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). On the hub cluster, create a secret "aws-s3-secret" with S3 credentials and a configmap "aws-s3-configmap" with S3 bucket name, region name & thresholdCapacity in the namespace where this policy is created (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/getting-started#prerequisites-for-tvk)
[policy-pod-placement](./CM-Configuration-Management/policy-pod-placement.yaml) | Ensures that a pod exists as specified. This policy uses the `Placement` kind rather than a `PlacementRule` to select managed clusters to deploy to. |
[Policy checking for ConfigurationPolicies stuck in a Terminating state](./CM-Configuration-Management/terminating-configpolicies.yaml) | Notifies that a ConfigurationPolicy was not able to delete some objects from its `PruneObjectBehavior` setting. Those related objects, and/or the ConfigurationPolicy might need to be manually cleaned up. |
[Policy to add node to an existing OpenShift cluster](./CM-Configuration-Management/policy-ztp-node-add.yaml) | Adds a new node to an existing ZTP cluster in ACM.  Useful to scale capacity to existing clusters as a day 2 operation.  This policy will apply to the hub cluster and deploy a new `BareMetalHost` resource in the managed cluster's namespace. | The multicluster-engine operator must be set up and configured on the hub cluster.  This policy assumes that DHCP is available for the node to obtain network information.  BMH secrets must be created separately.
[Policy to add node wtih static IP configurations to an existing OpenShift cluster](./CM-Configuration-Management/policy-ztp-node-add-static.yaml) | Adds a new node with a Static IP to an existing ZTP cluster in ACM.  Useful to scale capacity to existing clusters as a day 2 operation.  This policy will apply to the hub cluster and deploy new `BareMetalHost` and `NMStateConfig` resources in the managed cluster's namespace. | The multicluster-engine operator must be set up and configured on the hub cluster. BMH secrets must be created separately. 
[Policy to create a MachineSet for infrastructure nodes on a vSphere environment](./CM-Configuration-Management/policy-vsphere-machine-set.yaml) | Adds a new MachineSet for infrastructure nodes by using a vSphere cloud provider. This policy creates the virtual machines in the vCenter and adds the machines to the OpenShift cluster. | OpenShift 4.x is required. For more information on creating infrastructure machine sets, see the OpenShift documentation: [Creating infrastructure machine sets](https://docs.openshift.com/container-platform/4.10/machine_management/creating-infrastructure-machinesets.html)
[Policy to configure the OAuth in OpenShift and sync with LDAP](./CM-Configuration-Management/policy-oauth-ldapsync.yaml) | Adds some objects to configure the OAuth in a OpenShift cluster by using an external LDAP (Active Directory in this example). In addition to this, a CronJob is created to sync the OpenShift cluster with an external LDAP. | OpenShift 4.x is required. For more information on configuring the OAuth clients, see the OpenShift documentation: [Configuring the LDAP identity provider](https://docs.openshift.com/container-platform/4.10/authentication/identity_providers/configuring-ldap-identity-provider.html)
[Policy to configure the htpasswd identity provider in OpenShift](./CM-Configuration-Management/policy-oauth-htpasswd.yaml) | Adds some objects to configure the OAuth in a OpenShift cluster by using htpasswd identity provider. | OpenShift 4.x is required. For more information on configuring the OAuth clients, see the OpenShift documentation: [Configuring an htpasswd identity provider](https://docs.openshift.com/container-platform/4.10/authentication/identity_providers/configuring-htpasswd-identity-provider.html)
[Policy to install and configure OpenShift Service Mesh](./CM-Configuration-Management/policy-openshift-servicemesh.yaml) | Adds some objects to install OpenShift Service Mesh in Openshift Container Platform, and configure a basic Service Mesh. | OpenShift 4.x is required. For more information on installing and configuring OpenShift Service Mesh, see the OpenShift documentation: [Service Mesh 2.x](https://docs.openshift.com/container-platform/4.11/service_mesh/v2x/ossm-about.html)
[Policy to install Triliovault for Kubernetes using Helm chart](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes-using-helm.yaml) | Use this policy to install Triliovault for Kubernetes using Helm chart on any (non-Openshift) clusters with label "protected-by=triliovault" | Needs CSI Driver with snapshot capabilities, storageClass and volumeSnapshotClass. For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/getting-started#prerequisites-for-tvk)
[Policy to deploy trial license for Triliovault for Kubernetes deployed using Helm chart](./CM-Configuration-Management/policy-create-license-triliovault-for-kubernetes-upstream.yaml) | Use this policy to deploy trial license for Triliovault for Kubernetes deployed using Helm chart on any (non-Openshift) clusters with label "protected-by=triliovault". **Note**: Triliovault for Kubernetes must be installed using [Policy to install Triliovault for Kubernetes using Helm chart](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes-using-helm.yaml). For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/licensing#licensing-tvk)
[Policy to create label based backup using Triliovault for Kubernetes](./CM-Configuration-Management/policy-create-label-backup-triliovault-for-kubernetes.yaml) | Use this policy to create label based backup using Triliovault for Kubernetes on any clusters with label "protected-by=triliovault" | In case of  OpenShift, requires 4.8 or later. **Note**: Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). On the hub cluster, create a secret "aws-s3-secret" with S3 credentials and a configmap "aws-s3-configmap" with S3 bucket name, region name, thresholdCapacity, application label for backup & the namespace on the hub cluster where this policy is created (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/using-triliovault/getting-started-1#step-4.1-label-example)
[Policy to create helm based backup using Triliovault for Kubernetes](./CM-Configuration-Management/policy-create-helm-backup-triliovault-for-kubernetes.yaml) | Use this policy to create helm based backup using Triliovault for Kubernetes on any clusters with label "protected-by=triliovault" | In case of OpenShift, requires 4.8 or later. **Note**: Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). On the hub cluster, create a secret "aws-s3-secret" with S3 credentials and a configmap "aws-s3-configmap" with S3 bucket name, region name, thresholdCapacity, backup namespace & the helm release for backup on the hub cluster where this policy is created (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/using-triliovault/getting-started-1#step-4.2-helm-example)
[Policy to create operator based backup using Triliovault for Kubernetes](./CM-Configuration-Management/policy-create-operator-backup-triliovault-for-kubernetes.yaml) | Use this policy to create namespace based backup using Triliovault for Kubernetes on any clusters with label "protected-by=triliovault" | In case of OpenShift, requires 4.8 or later. **Note**: Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). On the hub cluster, create a secret "aws-s3-secret" with S3 credentials and a configmap "aws-s3-configmap" with S3 bucket name, region name, thresholdCapacity & backup namespace on the hub cluster where this policy is created. Also note that this configmap needs to updated with Operator details such as Operator ID, operator Resources Label-value and Operator Application Label-value (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/getting-started-3/using-triliovault/getting-started-1#step-4.3-operator-example)
[Policy to create event target for continuous restore using Triliovault for Kubernetes](./CM-Configuration-Management/policy-continuous-restore-event-target-triliovault-for-kubernetes.yaml) | 1st of total 3 policies for setting up Continuous Restore, use this policy to create event target on 2 clusters (source and target) participating in the Continuous Restore Functionality defined with labels "protected-by=triliovault" and "tvk-continuous-restore=enabled" | In case of OpenShift, requires 4.8 or later. **Note**: Triliovault for Kubernetes must be installed on both the clusters to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). On the hub cluster, create a secret "aws-s3-secret" with S3 credentials and a configmap "aws-s3-configmap" with S3 bucket name, region name & thresholdCapacity on the hub cluster where this policy is created (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/management-console/index/continuous-restore#create-an-event-target)
[Policy to create backup for continuous restore using Triliovault for Kubernetes](./CM-Configuration-Management/policy-continuous-restore-backup-triliovault-for-kubernetes.yaml) | 2nd of total 3 policies for setting up Continuous Restore, use this policy to create backup on the source cluster participating in the Continuous Restore Functionality defined with labels "protected-by=triliovault" and "tvk-continuous-restore-cluster=source" | In case of OpenShift, requires 4.8 or later. **Note**: Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). Must deploy 1st policy for setting up Continuous Restore to create event target, see [Policy to create event target for continuous restore using Triliovault for Kubernetes](./CM-Configuration-Management/policy-continuous-restore-event-target-triliovault-for-kubernetes.yaml). On the hub cluster, create a configmap tvk-cr-backup-configmap with backup namespace (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/management-console/index/continuous-restore#create-a-backupplan)
[Policy to create restore from continuous restore using Triliovault for Kubernetes](./CM-Configuration-Management/policy-continuous-restore-triliovault-for-kubernetes.yaml) | 3rd of total 3 policies for setting up Continuous Restore, use this policy to recover the application backed up from the source cluster to the target cluster participating in the Continuous Restore Functionality. The target cluster i defined with labels "protected-by=triliovault" and "tvk-continuous-restore-cluster=target". | In case of OpenShift, requires 4.8 or later. **Note**: Triliovault for Kubernetes must be installed to use this policy. See the [Policy to install Triliovault for Kubernetes Operator](./CM-Configuration-Management/policy-install-triliovault-for-kubernetes.yaml). Must deploy 1st policy for setting up Continuous Restore to create event target, see [Policy to create event target for continuous restore using Triliovault for Kubernetes](./CM-Configuration-Management/policy-continuous-restore-event-target-triliovault-for-kubernetes.yaml) and 2nd policy to create backup [Policy to create backup for continuous restore using Triliovault for Kubernetes](./CM-Configuration-Management/policy-continuous-restore-backup-triliovault-for-kubernetes.yaml). On the hub cluster, create a configmap tvk-cr-restore-configmap with restore namespace (details given in the policy). For more information, refer [documentation](https://docs.trilio.io/kubernetes/management-console/index/continuous-restore)
[Policy to install Red Hat Single Sign-On (RHSSO) operator](./CM-Configuration-Management/policy-rhsso-install-operator.yaml) | 1st of total 4 policies for configuring Red Hat Single Sign-on(RHSSO) across OCM managed clusters, use this policy to install RHSSO operator v7.6.2. | For more information, see [Red Hat Single Sign-On Operator documentation](https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.6/html/server_installation_and_configuration_guide/operator#doc-wrapper)
[Policy to setup Red Hat Single Sign-On (RHSSO) for OCM ](./CM-Configuration-Management/policy-rhsso-setup-for-acm.yaml) | 2nd of total 4 policies for configuring Red Hat Single Sign-on (RHSSO) across OCM managed clusters, use this policy to stand up an instance of KeyCloak on the hub cluster and an authentication realm for use by OCM  managed clusters.  | **Note:** Additional configuration of installed Keycloak instance e.g Authentication flow type or Setup of external IDPs like Github IDP etc need to performed directly in the KeyCloak console, for more information, see [Red Hat Single Sign-On Operator documentation](https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.6/html/server_installation_and_configuration_guide/operator#doc-wrapper)
[Policy to configure Red Hat Single Sign-on(RHSSO) for OCM managed cluster - Hub artifacts](./CM-Configuration-Management/policy-rhsso-configure-mc-hubresources.yaml) | 3rd of total 4 policies for configuring Red Hat Single Sign-on (RHSSO) across OCM managed clusters, use this policy to set up  hub side artifacts required to configure Red Hat Single Sign-on IDP on the managed clusters.  | For more information, see [Red Hat Single Sign-On Operator documentation](https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.6/html/server_installation_and_configuration_guide/operator#doc-wrapper)
[Policy to configure Red Hat Single Sign-on (RHSSO) for OCM managed cluster - Spoke artifacts](./CM-Configuration-Management/policy-rhsso-configure-mc-spokeresources.yaml) | 4th of total 4 policies for configuring Red Hat Single Sign-on (RHSSO) across OCM managed clusters, use this policy to set up  spoke side artifacts required to configure Red Hat Single Sign-on IDP on the managed clusters.  | For more information, see [Red Hat Single Sign-On Operator documentation](https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.6/html/server_installation_and_configuration_guide/operator#doc-wrapper), also see [Openshift OpenID IDP documentation](https://docs.openshift.com/container-platform/4.10/authentication/identity_providers/configuring-oidc-identity-provider.html)
[Policy to install and configure OADP operator for stateful application backup](./CM-Configuration-Management/acm-app-pv-backup/resources/policies/oadp-hdr-app-install.yaml) | First of 3 policies, used to backup or restore stateful applications on managed clusters. Used to install OADP on managed clusters and configure the connection to the storage location and installed on both backup and restore operations. | For more information, see [ACM Application Backup and Restore policy readme](./CM-Configuration-Management/acm-app-pv-backup/README.md)
[Policy to backup a stateful application with OADP](./CM-Configuration-Management/acm-app-pv-backup/resources/policies/oadp-hdr-app-backup.yaml) | Second of 3 policies, used to backup stateful applications on managed clusters. | For more information, see [ACM Application Backup and Restore policy readme](./CM-Configuration-Management/acm-app-pv-backup/README.md)
[Policy to restore a stateful application with OADP](./CM-Configuration-Management/acm-app-pv-backup/resources/policies/oadp-hdr-app-restore.yaml) | Last of 3 policies, used to restore stateful applications on managed clusters. | For more information, see [ACM Application Backup and Restore policy readme](./CM-Configuration-Management/acm-app-pv-backup/README.md)


### Contingency Planning

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Identification and Authentication

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Incident Response

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Maintenance

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Media Protection

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Physical and Environmental Protection

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Planning

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Personnel Security

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### Risk Assessment

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### System and Services Acquisition

Policy  | Description | Prerequisites
------- | ----------- | -------------
No policies yet       |  |

### System and Communications Protection

Policy  | Description | Prerequisites
------- | ----------- | -------------
[OpenShift Certificate Expiration Policy](./SC-System-and-Communications-Protection/policy-ocp4-certs.yaml) | Monitor the OpenShift 4.x namespaces to validate that certificates managed by the infrastructure are rotated as expected. | OpenShift 4.x is required.
[OpenShift Cluster Operator state policy](./SC-System-and-Communications-Protection/policy-checkclusteroperator.yaml) | This policy alerts when an OpenShift `ClusterOperator` becomes unhealthy. See [ClusterOperator config](https://docs.openshift.com/container-platform/latest/rest_api/config_apis/clusteroperator-config-openshift-io-v1.html) for additional details. | OpenShift 4.x only.
[Check namespaces in Terminating status](./SC-System-and-Communications-Protection/policy-checknamespaces-terminating.yaml)| check for namespaces in terminating status | check e.g. this [link](https://www.redhat.com/sysadmin/troubleshooting-terminating-namespaces) how to fix this.
[Disable self-provisioner](./SC-System-and-Communications-Protection/policy-disable-self-provisioner.yaml)| Disable ability to for users to create their own projects | OpenShift 4.x only.


### System and Information Integrity

Policy  | Description | Prerequisites
------- | ----------- | -------------
[Falco Cloud-Native runtime security Operator install](./SI-System-and-Information-Integrity/policy-falco.yaml) | Falco parses Linux system calls from the kernel at runtime, and asserts the stream against a powerful rules engine. If a rule is violated, a Falco alert is triggered. | **Archived**: Install Falco using the [Falco helm install](./SI-System-and-Information-Integrity/policy-falco-helm.yaml) since the [operator](https://github.com/sysdiglabs/falco-operator) is not being updated. [The Falco Project](https://falco.org/). If the agent fails to integrate with an OpenShift host kernel, install the policy [OpenShift Kernel Configuration](./CM-Configuration-Management/policy-kernel-devel.yaml).
[Falco Cloud-Native runtime security Helm install](./SI-System-and-Information-Integrity/policy-falco-helm.yaml) | Falco parses Linux system calls from the kernel at runtime, and asserts the stream against a powerful rules engine. If a rule is violated, a Falco alert is triggered. | [The Falco Project](https://falco.org/). If the agent fails to integrate with an OpenShift 4.x host kernel, install the policy [OpenShift Kernel Configuration](./CM-Configuration-Management/policy-kernel-devel.yaml).
[OpenShift Auditing for Falco](./SI-System-and-Information-Integrity/policy-falco-auditing.yaml) | Falco can also parse Kubernetes audit events and trigger alerts when auditing rules are violated. Use this policy to enable sending audit events to falco on OpenShift clusters. | [The Falco Project](https://falco.org/).
[Sysdig Agent](./SI-System-and-Information-Integrity/policy-sysdig.yaml) | The Sysdig Secure DevOps Platform converges security and compliance with performance and capacity monitoring to create a secure DevOps workflow. It uses the same data to monitor and secure, so you can correlate system activity with Kubernetes services. | Check [Sysdig](https://sysdig.com/) and start a [Free Trial](https://go.sysdig.com/rhacm-trial). If the agent fails to integrate with an OpenShift 4.x host kernel, install the [OpenShift Kernel Configuration](./CM-Configuration-Management/policy-kernel-devel.yaml) policy.
[Black Duck Connector](./SI-System-and-Information-Integrity/policy-blackduck.yaml) | By integrating Black Duck with Kubernetes and OpenShift, you can automatically scan, identify, and monitor all your container images to gain visibility into, and control over, any security vulnerabilities or policy violations found in the open source code that exists in your containers. | Check out [Black Duck for OpenShift](https://www.synopsys.com/software-integrity/partners/red-hat.html) and [read more](https://www.synopsys.com/software-integrity/security-testing/software-composition-analysis/demo.html).
[CrowdStrike Falcon Operator install](./SI-System-and-Information-Integrity/policy-crowdstrike-falcon-rhmp.yaml) | The CrowdStrike Falcon operator makes it easy to install and deploy CrowdStrike Falcon Sensors to run CrowdStrike Falcon Cloud Workload Protection to the control-plane and worker nodes running Red Hat Red Hat Enterprise Linux CoreOS (RHCOS) on Red Hat OpenShift 4. This allows customers to deploy and manage applications with a singular view across cloud environments, ensuring multi-cluster consistency and security. | Checkout [CrowdStrike's Cloud Workload Protection](https://www.crowdstrike.com/products/cloud-security/) and [learn more](https://www.crowdstrike.com/resources/data-sheets/falcon-cloud-workload-protection-solution-brief/). |

### Templatized Policies

The following sample policies demonstrate the use of templatization feature to build flexible policies

Policy  | Description | Prerequisites
------- | ----------- | -------------
[Configure Deployment](./CM-Configuration-Management/policy-nginx-deployment-templatized.yaml) | Configures nginx deployment resource customized to the target cluster based on contents of resources on the target managedcluster , template-type: managedcluster, template-functions : fromClusterClaim, fromSecret, eq, if-else | [Go Templates functions](https://pkg.go.dev/text/template)
[Configure PodDisrution Budget](./CM-Configuration-Management/policy-pod-disruption-budget-templatized.yaml) | Configures a pod disruption budget resource with the   values customized based on whether the target managedcluster is labeled a prod environment, template-type: managedcluster, template-functions : lookup, eq, if-else | [Go Templates functions](https://pkg.go.dev/text/template)
[Configure Cluster Info](./CM-Configuration-Management/policy-managedclusterinfo-templatized.yaml) | Configures a clusterinfo configmap  which contains information about the target managedcluster e.g. its ocp-version etc , template-type: managedcluster, template-functions : fromClusterClaim | [Go Templates functions](https://pkg.go.dev/text/template)
[Configure ClusterAutoScaler](./CM-Configuration-Management/policy-autoscaler-templatized.yaml) | Using hub templates configures the ClusterAutoScaler resource with values customized to the target cluster , template-type: hub, template-functions : fromConfigMap, .ManagedClusterName | [Go Templates functions](https://pkg.go.dev/text/template)
[Enable Policy If Namespace exists](./CM-Configuration-Management/policy-enable-if-ns-exists-templatized.yaml) | Demos enabling  one policy from another based on existence of a namespace, template type: managedcluster, template functions : lookup, ne, toBool | [Go Templates functions](https://pkg.go.dev/text/template)
[Enable Policy If EtcdEncryption is set](./CM-Configuration-Management/policy-enable-if-etcd-encrypted-templatized.yaml) | Enables one policy from another based on whether etcd encryption is setup, template type: managedcluster, template functions : lookup, ne, toBool | [Go Templates functions](https://pkg.go.dev/text/template)
[Configure SriovNetwork ](./CM-Configuration-Management/policy-sriovnetwork-templatized.yaml) | Using hub templates configures the SriovNetwork resource with values customized to the target cluster , template-type: hub, template-functions : fromConfigMap, .ManagedClusterName | [Sriov Network Operator](https://github.com/openshift/sriov-network-operator) , [Go Templates functions](https://pkg.go.dev/text/template)

## Deploying community policies to your cluster
While the policies in the [stable](../stable) folder are supported by the Open Cluster Management Policy SIG, community policies are maintained by the open source community. You might need to deploy extra policy consumers in order for community policies to work as intended. If you are seeing the error `no matches for kind "<resource name>" in version "<group>/<version>"`, you must deploy the CustomResourceDefinition (CRD) for the policy before you create it. If some of the policies in this folder are not behaving properly, you must deploy the corresponding policy consumers to handle them.

### Policy consumers on operator hub
Some policy consumers are packaged as [operators](https://coreos.com/operators/) and are available on the [Operator hub](https://operatorhub.io/). Often these are dependent on the Red Hat Operator Catalog. These consumers can simply be deployed by creating a policy with child [configuration policies](https://github.com/open-cluster-management-io/config-policy-controller) to handle the installation. The configuration policies might include the following information:
- A namespace to deploy the operator on, if necessary
- A ClusterServiceVersion with install capabilities to install the operator from the operator hub
- An OperatorGroup
- A Subscription
- The custom resource defined by the consumer to enforce custom policies
  For more specific examples of this method of deploying a policy consumer from the operator hub, see the [Policy to install `cert-manager`](./CM-Configuration-Management/policy-cert-manager-operator.yaml) and the [Ansible Automation Platform operator](./CM-Configuration-Management/policy-automation-operator.yaml).

### Other custom policy consumers
Occasionally, policies in this folder might be consumed by controllers that do not fall into either of the two categories previously mentioned. To get the most out of these policies, see the [Security control catalog](#security-control-catalog)
