apiVersion: policy.open-cluster-management.io/v1
kind: Policy
metadata:
  name: policy-gatekeeper-containerlivenessprobenotset
  annotations:
    policy.open-cluster-management.io/standards: NIST SP 800-53
    policy.open-cluster-management.io/categories: CM Configuration Management
    policy.open-cluster-management.io/controls: CM-2 Baseline Configuration
    integrityshield.io/message: YXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCmtpbmQ6IFBvbGljeQptZXRhZGF0YToKICBuYW1lOiBwb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6CiAgICBwb2xpY3kub3Blbi1jbHVzdGVyLW1hbmFnZW1lbnQuaW8vc3RhbmRhcmRzOiBOSVNUIFNQIDgwMC01MwogICAgcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL2NhdGVnb3JpZXM6IENNIENvbmZpZ3VyYXRpb24gTWFuYWdlbWVudAogICAgcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL2NvbnRyb2xzOiBDTS0yIEJhc2VsaW5lIENvbmZpZ3VyYXRpb24Kc3BlYzoKICByZW1lZGlhdGlvbkFjdGlvbjogZW5mb3JjZQogIGRpc2FibGVkOiBmYWxzZQogIHBvbGljeS10ZW1wbGF0ZXM6CiAgICAtIG9iamVjdERlZmluaXRpb246CiAgICAgICAgYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCiAgICAgICAga2luZDogQ29uZmlndXJhdGlvblBvbGljeQogICAgICAgIG1ldGFkYXRhOgogICAgICAgICAgbmFtZTogcG9saWN5LWdhdGVrZWVwZXItY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgIHNwZWM6CiAgICAgICAgICByZW1lZGlhdGlvbkFjdGlvbjogZW5mb3JjZQogICAgICAgICAgc2V2ZXJpdHk6IGxvdwogICAgICAgICAgb2JqZWN0LXRlbXBsYXRlczoKICAgICAgICAgICAgLSBjb21wbGlhbmNlVHlwZTogbXVzdGhhdmUKICAgICAgICAgICAgICBvYmplY3REZWZpbml0aW9uOgogICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdGVtcGxhdGVzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29uc3RyYWludFRlbXBsYXRlCiAgICAgICAgICAgICAgICBtZXRhZGF0YToKICAgICAgICAgICAgICAgICAgY3JlYXRpb25UaW1lc3RhbXA6IG51bGwKICAgICAgICAgICAgICAgICAgbmFtZTogY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgICAgICAgICAgc3BlYzoKICAgICAgICAgICAgICAgICAgY3JkOgogICAgICAgICAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgICAgICAgICBuYW1lczoKICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgICB0YXJnZXRzOgogICAgICAgICAgICAgICAgICAgIC0gbGliczoKICAgICAgICAgICAgICAgICAgICAgICAgLSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFja2FnZSBsaWIua29uc3RyYWludAoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGlzX2dhdGVrZWVwZXIgPSBmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19nYXRla2VlcGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChpbnB1dCwgInJldmlldyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoaW5wdXQucmV2aWV3LCAib2JqZWN0IikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IGlucHV0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19nYXRla2VlcGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBpbnB1dC5yZXZpZXcub2JqZWN0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2dhdGVrZWVwZXIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdChtc2cpID0gZ2F0ZWtlZXBlcl9mb3JtYXQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZ2F0ZWtlZXBlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F0ZWtlZXBlcl9mb3JtYXQgPSB7Im1zZyI6IG1zZ30KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdChtc2cpID0gbXNnIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19nYXRla2VlcGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gb2JqZWN0Lm1ldGFkYXRhLm5hbWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAga2luZCA9IG9iamVjdC5raW5kCgogICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChvYmosIGZpZWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nX2ZpZWxkKG9iaiwgZmllbGQpID0gdHJ1ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdID09ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nX2ZpZWxkKG9iaiwgZmllbGQpID0gdHJ1ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaGFzX2ZpZWxkKG9iaiwgZmllbGQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zZXJ2aWNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJzZXJ2aWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RhdGVmdWxzZXQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa2luZCkgPT0gInN0YXRlZnVsc2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGFlbW9uc2V0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJkYWVtb25zZXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kZXBsb3ltZW50IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJkZXBsb3ltZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcG9kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJwb2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19uYW1lc3BhY2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa2luZCkgPT0gIm5hbWVzcGFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3dvcmtsb2FkIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHBvZF9jb250YWluZXJzKHBvZCkgPSBhbGxfY29udGFpbmVycyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzID0geyJjb250YWluZXJzIiwgImluaXRDb250YWluZXJzIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb250YWluZXJzID0gW2MgfCBrZXlzW2tdOyBjID0gcG9kLnNwZWNba11bX11dCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJzW2NvbnRhaW5lcl0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfY29udGFpbmVycyA9IHBvZF9jb250YWluZXJzKHBvZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGFsbF9jb250YWluZXJzW19dCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJzW2NvbnRhaW5lcl0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX2NvbnRhaW5lcnMgPSBwb2RfY29udGFpbmVycyhvYmplY3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBhbGxfY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyX2ltYWdlc1tpbWFnZV0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyc1tjb250YWluZXJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGNvbnRhaW5lci5pbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyX2ltYWdlc1tpbWFnZV0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBvYmplY3Quc3BlYy5pbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRfaW1hZ2UoaW1hZ2UpID0gW2ltYWdlLCAibGF0ZXN0Il0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGNvbnRhaW5zKGltYWdlLCAiOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9pbWFnZShpbWFnZSkgPSBbaW1hZ2VfbmFtZSwgdGFnXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW1hZ2VfbmFtZSwgdGFnXSA9IHNwbGl0KGltYWdlLCAiOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RhdGVmdWxzZXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IG9iamVjdC5zcGVjLnRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGFlbW9uc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBvYmplY3Quc3BlYy50ZW1wbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2RlcGxveW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IG9iamVjdC5zcGVjLnRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcG9kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBvYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZXNbdm9sdW1lXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZSA9IHBvZC5zcGVjLnZvbHVtZXNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiRSIpID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIlAiKSA9IDEwMDAwMDAwMDAwMDAwMDAwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJUIikgPSAxMDAwMDAwMDAwMDAwMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiRyIpID0gMTAwMDAwMDAwMDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIk0iKSA9IDEwMDAwMDAwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJrIikgPSAxMDAwMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiIikgPSAxMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgibSIpID0gMSB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIktpIikgPSAxMDI0MDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiTWkiKSA9IDEwNDg1NzYwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJHaSIpID0gMTA3Mzc0MTgyNDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIlRpIikgPSAxMDk5NTExNjI3Nzc2MDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiUGkiKSA9IDExMjU4OTk5MDY4NDI2MjQwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJFaSIpID0gMTE1MjkyMTUwNDYwNjg0Njk3NjAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfc3VmZml4KG1lbSkgPSBzdWZmaXggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGlzX3N0cmluZyhtZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA+IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA6PSBzdWJzdHJpbmcobWVtLCBjb3VudChtZW0pIC0gMSwgLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoc3VmZml4KQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3N1ZmZpeChtZW0pID0gc3VmZml4IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3N0cmluZyhtZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudChtZW0pID4gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4IDo9IHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAyLCAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZShzdWZmaXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfc3VmZml4KG1lbSkgPSBzdWZmaXggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RyaW5nKG1lbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50KG1lbSkgPiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAxLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAyLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA9PSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAxLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA9PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X21lbShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19udW1iZXIob3JpZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyA6PSBvcmlnICogMTAwMAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pZnlfbWVtKG9yaWcpID0gbmV3IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19udW1iZXIob3JpZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA6PSBnZXRfc3VmZml4KG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXcgOj0gcmVwbGFjZShvcmlnLCBzdWZmaXgsICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVfbWF0Y2goIl5bMC05XSskIiwgcmF3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IDo9IHRvX251bWJlcihyYXcpICogbWVtX211bHRpcGxlKHN1ZmZpeCkKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X3N0b3JhZ2Uob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gb3JpZwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pZnlfc3RvcmFnZShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gZ2V0X3N1ZmZpeChvcmlnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3IDo9IHJlcGxhY2Uob3JpZywgc3VmZml4LCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlX21hdGNoKCJeWzAtOV0rJCIsIHJhdykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyA6PSB0b19udW1iZXIocmF3KSAqIG1lbV9tdWx0aXBsZShzdWZmaXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmlmeV9jcHUob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gb3JpZyAqIDEwMDAKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X2NwdShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRzd2l0aChvcmlnLCAibSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gdG9fbnVtYmVyKHJlcGxhY2Uob3JpZywgIm0iLCAiIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmlmeV9jcHUob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGlzX251bWJlcihvcmlnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGVuZHN3aXRoKG9yaWcsICJtIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlX21hdGNoKCJeWzAtOV0rJCIsIG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gdG9fbnVtYmVyKG9yaWcpICogMTAwMAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcHBlZF9jYXBhYmlsaXR5KGNvbnRhaW5lciwgY2FwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc2VjdXJpdHlDb250ZXh0LmNhcGFiaWxpdGllcy5kcm9wW19dID09IGNhcAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRfY2FwYWJpbGl0eShjb250YWluZXIsIGNhcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnNlY3VyaXR5Q29udGV4dC5jYXBhYmlsaXRpZXMuYWRkW19dID09IGNhcAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9fcmVhZF9vbmx5X2ZpbGVzeXN0ZW0oYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGhhc19maWVsZChjLCAic2VjdXJpdHlDb250ZXh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG5vX3JlYWRfb25seV9maWxlc3lzdGVtKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChjLCAic2VjdXJpdHlDb250ZXh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBoYXNfZmllbGQoYy5zZWN1cml0eUNvbnRleHQsICJyZWFkT25seVJvb3RGaWxlc3lzdGVtIikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZpbGVkZ2VfZXNjYWxhdGlvbl9hbGxvd2VkKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBoYXNfZmllbGQoYywgInNlY3VyaXR5Q29udGV4dCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2aWxlZGdlX2VzY2FsYXRpb25fYWxsb3dlZChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoYywgInNlY3VyaXR5Q29udGV4dCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoYy5zZWN1cml0eUNvbnRleHQsICJhbGxvd1ByaXZpbGVnZUVzY2FsYXRpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLSB8LQogICAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2UgbGliLm9wZW5zaGlmdAoKICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIua29uc3RyYWludAoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kZXBsb3ltZW50Y29uZmlnIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmFwaVZlcnNpb24pID09ICJhcHBzLm9wZW5zaGlmdC5pby92MSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmtpbmQpID09ICJkZXBsb3ltZW50Y29uZmlnIgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcm91dGUgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa29uc3RyYWludC5vYmplY3QuYXBpVmVyc2lvbikgPT0gInJvdXRlLm9wZW5zaGlmdC5pby92MSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmtpbmQpID09ICJyb3V0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3dvcmtsb2FkX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGVwbG95bWVudGNvbmZpZwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfd29ya2xvYWRfa2luZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb25zdHJhaW50LmlzX3N0YXRlZnVsc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc193b3JrbG9hZF9raW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQuaXNfZGFlbW9uc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc193b3JrbG9hZF9raW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQuaXNfZGVwbG95bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYWxsX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfd29ya2xvYWRfa2luZAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYWxsX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAga29uc3RyYWludC5pc19zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19hbGxfa2luZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19yb3V0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2RlcGxveW1lbnRjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IGtvbnN0cmFpbnQub2JqZWN0LnNwZWMudGVtcGxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHBvZHNbcG9kXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBrb25zdHJhaW50LnBvZHNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbY29udGFpbmVyXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb250YWluZXJzID0ga29uc3RyYWludC5wb2RfY29udGFpbmVycyhwb2QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBhbGxfY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyc1tjb250YWluZXJdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGtvbnN0cmFpbnQuY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHJlZ286IHwtCiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2Ugb2NwLmJlc3RwcmFjdGljZXMuY29udGFpbmVyX2xpdmVuZXNzcHJvYmVfbm90c2V0CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIua29uc3RyYWludAogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIub3BlbnNoaWZ0CgogICAgICAgICAgICAgICAgICAgICAgICB2aW9sYXRpb25bbXNnXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbnNoaWZ0LmlzX3dvcmtsb2FkX2tpbmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyIDo9IG9wZW5zaGlmdC5jb250YWluZXJzW19dCgogICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQubWlzc2luZ19maWVsZChjb250YWluZXIsICJsaXZlbmVzc1Byb2JlIikKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogOj0ga29uc3RyYWludC5vYmplY3QKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnIDo9IGtvbnN0cmFpbnQuZm9ybWF0KHNwcmludGYoIiVzLyVzOiBjb250YWluZXIgJyVzJyBoYXMgbm8gbGl2ZW5lc3NQcm9iZS4gU2VlOiBodHRwczovL2RvY3Mub3BlbnNoaWZ0LmNvbS9jb250YWluZXItcGxhdGZvcm0vbGF0ZXN0L2FwcGxpY2F0aW9ucy9hcHBsaWNhdGlvbi1oZWFsdGguaHRtbCIsIFtvYmoua2luZCwgb2JqLm1ldGFkYXRhLm5hbWUsIGNvbnRhaW5lci5uYW1lXSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogYWRtaXNzaW9uLms4cy5nYXRla2VlcGVyLnNoCiAgICAgICAgICAgIC0gY29tcGxpYW5jZVR5cGU6IG11c3RoYXZlCiAgICAgICAgICAgICAgb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IGNvbnN0cmFpbnRzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgICAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgICAgIG1hdGNoOgogICAgICAgICAgICAgICAgICAgIGtpbmRzOgogICAgICAgICAgICAgICAgICAgICAgLSBhcGlHcm91cHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgLSBhcHBzLm9wZW5zaGlmdC5pbwogICAgICAgICAgICAgICAgICAgICAgICAgIC0gYXBwcwogICAgICAgICAgICAgICAgICAgICAgICBraW5kczoKICAgICAgICAgICAgICAgICAgICAgICAgICAtIERlcGxveW1lbnRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAtIERhZW1vblNldAogICAgICAgICAgICAgICAgICAgICAgICAgIC0gRGVwbG95bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgIC0gU3RhdGVmdWxTZXQKICAgIC0gb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICBhcGlWZXJzaW9uOiBwb2xpY3kub3Blbi1jbHVzdGVyLW1hbmFnZW1lbnQuaW8vdjEKICAgICAgICBraW5kOiBDb25maWd1cmF0aW9uUG9saWN5CiAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICBuYW1lOiBwb2xpY3ktZ2F0ZWtlZXBlci1hdWRpdC1saXZlbmVzcwogICAgICAgIHNwZWM6CiAgICAgICAgICByZW1lZGlhdGlvbkFjdGlvbjogaW5mb3JtICMgd2lsbCBiZSBvdmVycmlkZGVuIGJ5IHJlbWVkaWF0aW9uQWN0aW9uIGluIHBhcmVudCBwb2xpY3kKICAgICAgICAgIHNldmVyaXR5OiBsb3cKICAgICAgICAgIG9iamVjdC10ZW1wbGF0ZXM6CiAgICAgICAgICAgIC0gY29tcGxpYW5jZVR5cGU6IG11c3RoYXZlCiAgICAgICAgICAgICAgb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IGNvbnN0cmFpbnRzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgICAgICAgICAgICAgIHN0YXR1czoKICAgICAgICAgICAgICAgICAgdG90YWxWaW9sYXRpb25zOiAwCiAgICAtIG9iamVjdERlZmluaXRpb246CiAgICAgICAgYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCiAgICAgICAga2luZDogQ29uZmlndXJhdGlvblBvbGljeQogICAgICAgIG1ldGFkYXRhOgogICAgICAgICAgbmFtZTogcG9saWN5LWdhdGVrZWVwZXItYWRtaXNzaW9uLWxpdmVuZXNzCiAgICAgICAgc3BlYzoKICAgICAgICAgIHJlbWVkaWF0aW9uQWN0aW9uOiBpbmZvcm0gIyB3aWxsIGJlIG92ZXJyaWRkZW4gYnkgcmVtZWRpYXRpb25BY3Rpb24gaW4gcGFyZW50IHBvbGljeQogICAgICAgICAgc2V2ZXJpdHk6IGxvdwogICAgICAgICAgb2JqZWN0LXRlbXBsYXRlczoKICAgICAgICAgICAgLSBjb21wbGlhbmNlVHlwZTogbXVzdG5vdGhhdmUKICAgICAgICAgICAgICBvYmplY3REZWZpbml0aW9uOgogICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdjEKICAgICAgICAgICAgICAgIGtpbmQ6IEV2ZW50CiAgICAgICAgICAgICAgICBtZXRhZGF0YToKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBvcGVuc2hpZnQtZ2F0ZWtlZXBlci1zeXN0ZW0gIyBzZXQgaXQgdG8gdGhlIGFjdHVhbCBuYW1lc3BhY2Ugd2hlcmUgZ2F0ZWtlZXBlciBpcyBydW5uaW5nIGlmIGRpZmZlcmVudAogICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczoKICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50X2FjdGlvbjogZGVueQogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRfa2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRfbmFtZTogY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgICAgICAgICAgICAgIGV2ZW50X3R5cGU6IHZpb2xhdGlvbgotLS0KYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCmtpbmQ6IFBsYWNlbWVudEJpbmRpbmcKbWV0YWRhdGE6CiAgbmFtZTogYmluZGluZy1wb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6IHt9CnBsYWNlbWVudFJlZjoKICBuYW1lOiBwbGFjZW1lbnQtcG9saWN5LWdhdGVrZWVwZXItY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogIGtpbmQ6IFBsYWNlbWVudFJ1bGUKICBhcGlHcm91cDogYXBwcy5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pbwpzdWJqZWN0czoKICAtIG5hbWU6IHBvbGljeS1nYXRla2VlcGVyLWNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgIGtpbmQ6IFBvbGljeQogICAgYXBpR3JvdXA6IHBvbGljeS5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pbwotLS0KYXBpVmVyc2lvbjogYXBwcy5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pby92MQpraW5kOiBQbGFjZW1lbnRSdWxlCm1ldGFkYXRhOgogIG5hbWU6IHBsYWNlbWVudC1wb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6IHt9CnNwZWM6CiAgY2x1c3RlckNvbmRpdGlvbnM6CiAgICAtIHN0YXR1czogIlRydWUiCiAgICAgIHR5cGU6IE1hbmFnZWRDbHVzdGVyQ29uZGl0aW9uQXZhaWxhYmxlCiAgY2x1c3RlclNlbGVjdG9yOgogICAgbWF0Y2hFeHByZXNzaW9uczoKICAgICAgLSB7a2V5OiBlbnZpcm9ubWVudCwgb3BlcmF0b3I6IEluLCB2YWx1ZXM6IFsiZGV2Il19Cg==
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEdCQUFCQ0FBd0ZpRUVJbnBMR1hSY1QwV2tWTzgyVSt5TUt1c3JLdUlGQW1BSVhGNFNISE5vYVdWc1pFQnkKWldSb1lYUXVZMjl0QUFvSkVGUHNqQ3JyS3lyaUUxTU1BSnV0d0R1QXpsTjkwekRJRlNpSlgxcnFpR3NYZWZOYwpFN3V0OS95NTZyTjByd3RmSTBkRnNaTkJhMERRd0xvVEkvQmMxaGZCSStqT09ZY2h0SDdWTHVUcm1LNkt6eVdTCk1tRGhXeGNmSXNHVFhCMTFRR0p2L1Y0S2xlZ2ZYMnRsNGhXLyt5c281YnNYV2tTRndzTEd2L2dwZitodWplemgKaGYvVTA2TitjaFlGaTQyL0FuWlRIaDhHUDdoZVo2NHM5TlBqcHJJU240dzdmYUtFVldoNzA1RlpCb0RZampUawpXcCtMMTE4OTNLS2RnV1ZnSElyZzZwa2R4eXpUcTZZejJHSDRvR0x4QnZ4eE9Cc1F4c1pHdDVRTUxHODhaRmpjCkpKVk0vUnZZQTBBTDVxVjFUazRRMG1zcy9xeDc2WEgrMEd1bTRma2xuWUdIT0pic0ZlWGorTFgvQTRNQkd0WFMKekdOSjBOQzI5c2FCNk9tNTlUQUgzUU5md1NyWUpRbXVKVjhsYTdhdHZnc00wT2REanNoMmVpYWU4bUx3TnoydApTaUt0dWw1MTdlRDRIWFVPWnloVGZvZ205azE4RHFvbVNpUGt1ZmJWWVE2SXBLT1VNSy9CY1p3bjdDQ0Q3WHhjCklzeFlLWE5jMVJwMEJ5ZUx4ZlZlOTlEeUpRcEl6eTV1cGc9PQo9T1BieAotLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS0K
spec:
  remediationAction: enforce
  disabled: false
  policy-templates:
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-gatekeeper-containerlivenessprobenotset
        spec:
          remediationAction: enforce
          severity: low
          object-templates:
            - complianceType: musthave
              objectDefinition:
                apiVersion: templates.gatekeeper.sh/v1beta1
                kind: ConstraintTemplate
                metadata:
                  creationTimestamp: null
                  name: containerlivenessprobenotset
                spec:
                  crd:
                    spec:
                      names:
                        kind: ContainerLivenessprobeNotset
                  targets:
                    - libs:
                        - |
                          package lib.konstraint

                          default is_gatekeeper = false

                          is_gatekeeper {
                            has_field(input, "review")
                            has_field(input.review, "object")
                          }

                          object = input {
                            not is_gatekeeper
                          }

                          object = input.review.object {
                            is_gatekeeper
                          }

                          format(msg) = gatekeeper_format {
                            is_gatekeeper
                            gatekeeper_format = {"msg": msg}
                          }

                          format(msg) = msg {
                            not is_gatekeeper
                          }

                          name = object.metadata.name

                          kind = object.kind

                          has_field(obj, field) {
                            obj[field]
                          }

                          missing_field(obj, field) = true {
                            obj[field] == ""
                          }

                          missing_field(obj, field) = true {
                            not has_field(obj, field)
                          }

                          is_service {
                            lower(kind) == "service"
                          }

                          is_statefulset {
                            lower(kind) == "statefulset"
                          }

                          is_daemonset {
                            lower(kind) == "daemonset"
                          }

                          is_deployment {
                            lower(kind) == "deployment"
                          }

                          is_pod {
                            lower(kind) == "pod"
                          }

                          is_namespace {
                            lower(kind) == "namespace"
                          }

                          is_workload {
                            containers[_]
                          }

                          pod_containers(pod) = all_containers {
                            keys = {"containers", "initContainers"}
                            all_containers = [c | keys[k]; c = pod.spec[k][_]]
                          }

                          containers[container] {
                            pods[pod]
                            all_containers = pod_containers(pod)
                            container = all_containers[_]
                          }

                          containers[container] {
                            all_containers = pod_containers(object)
                            container = all_containers[_]
                          }

                          container_images[image] {
                            containers[container]
                            image = container.image
                          }

                          container_images[image] {
                            image = object.spec.image
                          }

                          split_image(image) = [image, "latest"] {
                            not contains(image, ":")
                          }

                          split_image(image) = [image_name, tag] {
                            [image_name, tag] = split(image, ":")
                          }

                          pods[pod] {
                            is_statefulset
                            pod = object.spec.template
                          }

                          pods[pod] {
                            is_daemonset
                            pod = object.spec.template
                          }

                          pods[pod] {
                            is_deployment
                            pod = object.spec.template
                          }

                          pods[pod] {
                            is_pod
                            pod = object
                          }

                          volumes[volume] {
                            pods[pod]
                            volume = pod.spec.volumes[_]
                          }

                          mem_multiple("E") = 1000000000000000000000 { true }

                          mem_multiple("P") = 1000000000000000000 { true }

                          mem_multiple("T") = 1000000000000000 { true }

                          mem_multiple("G") = 1000000000000 { true }

                          mem_multiple("M") = 1000000000 { true }

                          mem_multiple("k") = 1000000 { true }

                          mem_multiple("") = 1000 { true }

                          mem_multiple("m") = 1 { true }

                          mem_multiple("Ki") = 1024000 { true }

                          mem_multiple("Mi") = 1048576000 { true }

                          mem_multiple("Gi") = 1073741824000 { true }

                          mem_multiple("Ti") = 1099511627776000 { true }

                          mem_multiple("Pi") = 1125899906842624000 { true }

                          mem_multiple("Ei") = 1152921504606846976000 { true }

                          get_suffix(mem) = suffix {
                            not is_string(mem)
                            suffix := ""
                          }

                          get_suffix(mem) = suffix {
                            is_string(mem)
                            count(mem) > 0
                            suffix := substring(mem, count(mem) - 1, -1)
                            mem_multiple(suffix)
                          }

                          get_suffix(mem) = suffix {
                            is_string(mem)
                            count(mem) > 1
                            suffix := substring(mem, count(mem) - 2, -1)
                            mem_multiple(suffix)
                          }

                          get_suffix(mem) = suffix {
                            is_string(mem)
                            count(mem) > 1
                            not mem_multiple(substring(mem, count(mem) - 1, -1))
                            not mem_multiple(substring(mem, count(mem) - 2, -1))
                            suffix := ""
                          }

                          get_suffix(mem) = suffix {
                            is_string(mem)
                            count(mem) == 1
                            not mem_multiple(substring(mem, count(mem) - 1, -1))
                            suffix := ""
                          }

                          get_suffix(mem) = suffix {
                            is_string(mem)
                            count(mem) == 0
                            suffix := ""
                          }

                          canonify_mem(orig) = new {
                            is_number(orig)
                            new := orig * 1000
                          }

                          canonify_mem(orig) = new {
                            not is_number(orig)
                            suffix := get_suffix(orig)
                            raw := replace(orig, suffix, "")
                            re_match("^[0-9]+$", raw)
                            new := to_number(raw) * mem_multiple(suffix)
                          }

                          canonify_storage(orig) = new {
                            is_number(orig)
                            new := orig
                          }

                          canonify_storage(orig) = new {
                            not is_number(orig)
                            suffix := get_suffix(orig)
                            raw := replace(orig, suffix, "")
                            re_match("^[0-9]+$", raw)
                            new := to_number(raw) * mem_multiple(suffix)
                          }

                          canonify_cpu(orig) = new {
                            is_number(orig)
                            new := orig * 1000
                          }

                          canonify_cpu(orig) = new {
                            not is_number(orig)
                            endswith(orig, "m")
                            new := to_number(replace(orig, "m", ""))
                          }

                          canonify_cpu(orig) = new {
                            not is_number(orig)
                            not endswith(orig, "m")
                            re_match("^[0-9]+$", orig)
                            new := to_number(orig) * 1000
                          }

                          dropped_capability(container, cap) {
                            container.securityContext.capabilities.drop[_] == cap
                          }

                          added_capability(container, cap) {
                            container.securityContext.capabilities.add[_] == cap
                          }

                          no_read_only_filesystem(c) {
                            not has_field(c, "securityContext")
                          }

                          no_read_only_filesystem(c) {
                            has_field(c, "securityContext")
                            not has_field(c.securityContext, "readOnlyRootFilesystem")
                          }

                          priviledge_escalation_allowed(c) {
                            not has_field(c, "securityContext")
                          }

                          priviledge_escalation_allowed(c) {
                            has_field(c, "securityContext")
                            has_field(c.securityContext, "allowPrivilegeEscalation")
                          }
                        - |-
                          package lib.openshift

                          import data.lib.konstraint

                          is_deploymentconfig {
                            lower(konstraint.object.apiVersion) == "apps.openshift.io/v1"
                            lower(konstraint.object.kind) == "deploymentconfig"
                          }

                          is_route {
                            lower(konstraint.object.apiVersion) == "route.openshift.io/v1"
                            lower(konstraint.object.kind) == "route"
                          }

                          is_workload_kind {
                            is_deploymentconfig
                          }

                          is_workload_kind {
                            konstraint.is_statefulset
                          }

                          is_workload_kind {
                            konstraint.is_daemonset
                          }

                          is_workload_kind {
                            konstraint.is_deployment
                          }

                          is_all_kind {
                            is_workload_kind
                          }

                          is_all_kind {
                            konstraint.is_service
                          }

                          is_all_kind {
                            is_route
                          }

                          pods[pod] {
                            is_deploymentconfig
                            pod = konstraint.object.spec.template
                          }

                          pods[pod] {
                            pod = konstraint.pods[_]
                          }

                          containers[container] {
                            pods[pod]
                            all_containers = konstraint.pod_containers(pod)
                            container = all_containers[_]
                          }

                          containers[container] {
                            container = konstraint.containers[_]
                          }
                      rego: |-
                        package ocp.bestpractices.container_livenessprobe_notset

                        import data.lib.konstraint
                        import data.lib.openshift

                        violation[msg] {
                          openshift.is_workload_kind

                          container := openshift.containers[_]

                          konstraint.missing_field(container, "livenessProbe")
                          obj := konstraint.object

                          msg := konstraint.format(sprintf("%s/%s: container '%s' has no livenessProbe. See: https://docs.openshift.com/container-platform/latest/applications/application-health.html", [obj.kind, obj.metadata.name, container.name]))
                        }
                      target: admission.k8s.gatekeeper.sh
            - complianceType: musthave
              objectDefinition:
                apiVersion: constraints.gatekeeper.sh/v1beta1
                kind: ContainerLivenessprobeNotset
                metadata:
                  name: containerlivenessprobenotset
                spec:
                  match:
                    kinds:
                      - apiGroups:
                          - apps.openshift.io
                          - apps
                        kinds:
                          - DeploymentConfig
                          - DaemonSet
                          - Deployment
                          - StatefulSet
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-gatekeeper-audit-liveness
        spec:
          remediationAction: inform # will be overridden by remediationAction in parent policy
          severity: low
          object-templates:
            - complianceType: musthave
              objectDefinition:
                apiVersion: constraints.gatekeeper.sh/v1beta1
                kind: ContainerLivenessprobeNotset
                metadata:
                  name: containerlivenessprobenotset
                status:
                  totalViolations: 0
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-gatekeeper-admission-liveness
        spec:
          remediationAction: inform # will be overridden by remediationAction in parent policy
          severity: low
          object-templates:
            - complianceType: mustnothave
              objectDefinition:
                apiVersion: v1
                kind: Event
                metadata:
                  namespace: openshift-gatekeeper-system # set it to the actual namespace where gatekeeper is running if different
                  annotations:
                    constraint_action: deny
                    constraint_kind: ContainerLivenessprobeNotset
                    constraint_name: containerlivenessprobenotset
                    event_type: violation
---
apiVersion: policy.open-cluster-management.io/v1
kind: PlacementBinding
metadata:
  name: binding-policy-gatekeeper-containerlivenessprobenotset
  annotations: {integrityshield.io/message: YXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCmtpbmQ6IFBvbGljeQptZXRhZGF0YToKICBuYW1lOiBwb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6CiAgICBwb2xpY3kub3Blbi1jbHVzdGVyLW1hbmFnZW1lbnQuaW8vc3RhbmRhcmRzOiBOSVNUIFNQIDgwMC01MwogICAgcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL2NhdGVnb3JpZXM6IENNIENvbmZpZ3VyYXRpb24gTWFuYWdlbWVudAogICAgcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL2NvbnRyb2xzOiBDTS0yIEJhc2VsaW5lIENvbmZpZ3VyYXRpb24Kc3BlYzoKICByZW1lZGlhdGlvbkFjdGlvbjogZW5mb3JjZQogIGRpc2FibGVkOiBmYWxzZQogIHBvbGljeS10ZW1wbGF0ZXM6CiAgICAtIG9iamVjdERlZmluaXRpb246CiAgICAgICAgYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCiAgICAgICAga2luZDogQ29uZmlndXJhdGlvblBvbGljeQogICAgICAgIG1ldGFkYXRhOgogICAgICAgICAgbmFtZTogcG9saWN5LWdhdGVrZWVwZXItY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgIHNwZWM6CiAgICAgICAgICByZW1lZGlhdGlvbkFjdGlvbjogZW5mb3JjZQogICAgICAgICAgc2V2ZXJpdHk6IGxvdwogICAgICAgICAgb2JqZWN0LXRlbXBsYXRlczoKICAgICAgICAgICAgLSBjb21wbGlhbmNlVHlwZTogbXVzdGhhdmUKICAgICAgICAgICAgICBvYmplY3REZWZpbml0aW9uOgogICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdGVtcGxhdGVzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29uc3RyYWludFRlbXBsYXRlCiAgICAgICAgICAgICAgICBtZXRhZGF0YToKICAgICAgICAgICAgICAgICAgY3JlYXRpb25UaW1lc3RhbXA6IG51bGwKICAgICAgICAgICAgICAgICAgbmFtZTogY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgICAgICAgICAgc3BlYzoKICAgICAgICAgICAgICAgICAgY3JkOgogICAgICAgICAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgICAgICAgICBuYW1lczoKICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgICB0YXJnZXRzOgogICAgICAgICAgICAgICAgICAgIC0gbGliczoKICAgICAgICAgICAgICAgICAgICAgICAgLSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFja2FnZSBsaWIua29uc3RyYWludAoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGlzX2dhdGVrZWVwZXIgPSBmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19nYXRla2VlcGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChpbnB1dCwgInJldmlldyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoaW5wdXQucmV2aWV3LCAib2JqZWN0IikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IGlucHV0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19nYXRla2VlcGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBpbnB1dC5yZXZpZXcub2JqZWN0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2dhdGVrZWVwZXIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdChtc2cpID0gZ2F0ZWtlZXBlcl9mb3JtYXQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZ2F0ZWtlZXBlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F0ZWtlZXBlcl9mb3JtYXQgPSB7Im1zZyI6IG1zZ30KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdChtc2cpID0gbXNnIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19nYXRla2VlcGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gb2JqZWN0Lm1ldGFkYXRhLm5hbWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAga2luZCA9IG9iamVjdC5raW5kCgogICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChvYmosIGZpZWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nX2ZpZWxkKG9iaiwgZmllbGQpID0gdHJ1ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdID09ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nX2ZpZWxkKG9iaiwgZmllbGQpID0gdHJ1ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaGFzX2ZpZWxkKG9iaiwgZmllbGQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zZXJ2aWNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJzZXJ2aWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RhdGVmdWxzZXQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa2luZCkgPT0gInN0YXRlZnVsc2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGFlbW9uc2V0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJkYWVtb25zZXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kZXBsb3ltZW50IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJkZXBsb3ltZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcG9kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJwb2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19uYW1lc3BhY2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa2luZCkgPT0gIm5hbWVzcGFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3dvcmtsb2FkIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHBvZF9jb250YWluZXJzKHBvZCkgPSBhbGxfY29udGFpbmVycyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzID0geyJjb250YWluZXJzIiwgImluaXRDb250YWluZXJzIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb250YWluZXJzID0gW2MgfCBrZXlzW2tdOyBjID0gcG9kLnNwZWNba11bX11dCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJzW2NvbnRhaW5lcl0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfY29udGFpbmVycyA9IHBvZF9jb250YWluZXJzKHBvZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGFsbF9jb250YWluZXJzW19dCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJzW2NvbnRhaW5lcl0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX2NvbnRhaW5lcnMgPSBwb2RfY29udGFpbmVycyhvYmplY3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBhbGxfY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyX2ltYWdlc1tpbWFnZV0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyc1tjb250YWluZXJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGNvbnRhaW5lci5pbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyX2ltYWdlc1tpbWFnZV0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBvYmplY3Quc3BlYy5pbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRfaW1hZ2UoaW1hZ2UpID0gW2ltYWdlLCAibGF0ZXN0Il0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGNvbnRhaW5zKGltYWdlLCAiOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9pbWFnZShpbWFnZSkgPSBbaW1hZ2VfbmFtZSwgdGFnXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW1hZ2VfbmFtZSwgdGFnXSA9IHNwbGl0KGltYWdlLCAiOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RhdGVmdWxzZXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IG9iamVjdC5zcGVjLnRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGFlbW9uc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBvYmplY3Quc3BlYy50ZW1wbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2RlcGxveW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IG9iamVjdC5zcGVjLnRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcG9kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBvYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZXNbdm9sdW1lXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZSA9IHBvZC5zcGVjLnZvbHVtZXNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiRSIpID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIlAiKSA9IDEwMDAwMDAwMDAwMDAwMDAwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJUIikgPSAxMDAwMDAwMDAwMDAwMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiRyIpID0gMTAwMDAwMDAwMDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIk0iKSA9IDEwMDAwMDAwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJrIikgPSAxMDAwMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiIikgPSAxMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgibSIpID0gMSB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIktpIikgPSAxMDI0MDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiTWkiKSA9IDEwNDg1NzYwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJHaSIpID0gMTA3Mzc0MTgyNDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIlRpIikgPSAxMDk5NTExNjI3Nzc2MDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiUGkiKSA9IDExMjU4OTk5MDY4NDI2MjQwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJFaSIpID0gMTE1MjkyMTUwNDYwNjg0Njk3NjAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfc3VmZml4KG1lbSkgPSBzdWZmaXggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGlzX3N0cmluZyhtZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA+IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA6PSBzdWJzdHJpbmcobWVtLCBjb3VudChtZW0pIC0gMSwgLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoc3VmZml4KQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3N1ZmZpeChtZW0pID0gc3VmZml4IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3N0cmluZyhtZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudChtZW0pID4gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4IDo9IHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAyLCAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZShzdWZmaXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfc3VmZml4KG1lbSkgPSBzdWZmaXggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RyaW5nKG1lbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50KG1lbSkgPiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAxLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAyLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA9PSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAxLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA9PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X21lbShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19udW1iZXIob3JpZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyA6PSBvcmlnICogMTAwMAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pZnlfbWVtKG9yaWcpID0gbmV3IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19udW1iZXIob3JpZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA6PSBnZXRfc3VmZml4KG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXcgOj0gcmVwbGFjZShvcmlnLCBzdWZmaXgsICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVfbWF0Y2goIl5bMC05XSskIiwgcmF3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IDo9IHRvX251bWJlcihyYXcpICogbWVtX211bHRpcGxlKHN1ZmZpeCkKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X3N0b3JhZ2Uob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gb3JpZwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pZnlfc3RvcmFnZShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gZ2V0X3N1ZmZpeChvcmlnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3IDo9IHJlcGxhY2Uob3JpZywgc3VmZml4LCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlX21hdGNoKCJeWzAtOV0rJCIsIHJhdykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyA6PSB0b19udW1iZXIocmF3KSAqIG1lbV9tdWx0aXBsZShzdWZmaXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmlmeV9jcHUob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gb3JpZyAqIDEwMDAKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X2NwdShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRzd2l0aChvcmlnLCAibSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gdG9fbnVtYmVyKHJlcGxhY2Uob3JpZywgIm0iLCAiIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmlmeV9jcHUob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGlzX251bWJlcihvcmlnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGVuZHN3aXRoKG9yaWcsICJtIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlX21hdGNoKCJeWzAtOV0rJCIsIG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gdG9fbnVtYmVyKG9yaWcpICogMTAwMAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcHBlZF9jYXBhYmlsaXR5KGNvbnRhaW5lciwgY2FwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc2VjdXJpdHlDb250ZXh0LmNhcGFiaWxpdGllcy5kcm9wW19dID09IGNhcAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRfY2FwYWJpbGl0eShjb250YWluZXIsIGNhcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnNlY3VyaXR5Q29udGV4dC5jYXBhYmlsaXRpZXMuYWRkW19dID09IGNhcAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9fcmVhZF9vbmx5X2ZpbGVzeXN0ZW0oYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGhhc19maWVsZChjLCAic2VjdXJpdHlDb250ZXh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG5vX3JlYWRfb25seV9maWxlc3lzdGVtKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChjLCAic2VjdXJpdHlDb250ZXh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBoYXNfZmllbGQoYy5zZWN1cml0eUNvbnRleHQsICJyZWFkT25seVJvb3RGaWxlc3lzdGVtIikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZpbGVkZ2VfZXNjYWxhdGlvbl9hbGxvd2VkKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBoYXNfZmllbGQoYywgInNlY3VyaXR5Q29udGV4dCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2aWxlZGdlX2VzY2FsYXRpb25fYWxsb3dlZChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoYywgInNlY3VyaXR5Q29udGV4dCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoYy5zZWN1cml0eUNvbnRleHQsICJhbGxvd1ByaXZpbGVnZUVzY2FsYXRpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLSB8LQogICAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2UgbGliLm9wZW5zaGlmdAoKICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIua29uc3RyYWludAoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kZXBsb3ltZW50Y29uZmlnIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmFwaVZlcnNpb24pID09ICJhcHBzLm9wZW5zaGlmdC5pby92MSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmtpbmQpID09ICJkZXBsb3ltZW50Y29uZmlnIgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcm91dGUgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa29uc3RyYWludC5vYmplY3QuYXBpVmVyc2lvbikgPT0gInJvdXRlLm9wZW5zaGlmdC5pby92MSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmtpbmQpID09ICJyb3V0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3dvcmtsb2FkX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGVwbG95bWVudGNvbmZpZwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfd29ya2xvYWRfa2luZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb25zdHJhaW50LmlzX3N0YXRlZnVsc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc193b3JrbG9hZF9raW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQuaXNfZGFlbW9uc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc193b3JrbG9hZF9raW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQuaXNfZGVwbG95bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYWxsX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfd29ya2xvYWRfa2luZAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYWxsX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAga29uc3RyYWludC5pc19zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19hbGxfa2luZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19yb3V0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2RlcGxveW1lbnRjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IGtvbnN0cmFpbnQub2JqZWN0LnNwZWMudGVtcGxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHBvZHNbcG9kXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBrb25zdHJhaW50LnBvZHNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbY29udGFpbmVyXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb250YWluZXJzID0ga29uc3RyYWludC5wb2RfY29udGFpbmVycyhwb2QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBhbGxfY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyc1tjb250YWluZXJdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGtvbnN0cmFpbnQuY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHJlZ286IHwtCiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2Ugb2NwLmJlc3RwcmFjdGljZXMuY29udGFpbmVyX2xpdmVuZXNzcHJvYmVfbm90c2V0CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIua29uc3RyYWludAogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIub3BlbnNoaWZ0CgogICAgICAgICAgICAgICAgICAgICAgICB2aW9sYXRpb25bbXNnXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbnNoaWZ0LmlzX3dvcmtsb2FkX2tpbmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyIDo9IG9wZW5zaGlmdC5jb250YWluZXJzW19dCgogICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQubWlzc2luZ19maWVsZChjb250YWluZXIsICJsaXZlbmVzc1Byb2JlIikKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogOj0ga29uc3RyYWludC5vYmplY3QKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnIDo9IGtvbnN0cmFpbnQuZm9ybWF0KHNwcmludGYoIiVzLyVzOiBjb250YWluZXIgJyVzJyBoYXMgbm8gbGl2ZW5lc3NQcm9iZS4gU2VlOiBodHRwczovL2RvY3Mub3BlbnNoaWZ0LmNvbS9jb250YWluZXItcGxhdGZvcm0vbGF0ZXN0L2FwcGxpY2F0aW9ucy9hcHBsaWNhdGlvbi1oZWFsdGguaHRtbCIsIFtvYmoua2luZCwgb2JqLm1ldGFkYXRhLm5hbWUsIGNvbnRhaW5lci5uYW1lXSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogYWRtaXNzaW9uLms4cy5nYXRla2VlcGVyLnNoCiAgICAgICAgICAgIC0gY29tcGxpYW5jZVR5cGU6IG11c3RoYXZlCiAgICAgICAgICAgICAgb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IGNvbnN0cmFpbnRzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgICAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgICAgIG1hdGNoOgogICAgICAgICAgICAgICAgICAgIGtpbmRzOgogICAgICAgICAgICAgICAgICAgICAgLSBhcGlHcm91cHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgLSBhcHBzLm9wZW5zaGlmdC5pbwogICAgICAgICAgICAgICAgICAgICAgICAgIC0gYXBwcwogICAgICAgICAgICAgICAgICAgICAgICBraW5kczoKICAgICAgICAgICAgICAgICAgICAgICAgICAtIERlcGxveW1lbnRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAtIERhZW1vblNldAogICAgICAgICAgICAgICAgICAgICAgICAgIC0gRGVwbG95bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgIC0gU3RhdGVmdWxTZXQKICAgIC0gb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICBhcGlWZXJzaW9uOiBwb2xpY3kub3Blbi1jbHVzdGVyLW1hbmFnZW1lbnQuaW8vdjEKICAgICAgICBraW5kOiBDb25maWd1cmF0aW9uUG9saWN5CiAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICBuYW1lOiBwb2xpY3ktZ2F0ZWtlZXBlci1hdWRpdC1saXZlbmVzcwogICAgICAgIHNwZWM6CiAgICAgICAgICByZW1lZGlhdGlvbkFjdGlvbjogaW5mb3JtICMgd2lsbCBiZSBvdmVycmlkZGVuIGJ5IHJlbWVkaWF0aW9uQWN0aW9uIGluIHBhcmVudCBwb2xpY3kKICAgICAgICAgIHNldmVyaXR5OiBsb3cKICAgICAgICAgIG9iamVjdC10ZW1wbGF0ZXM6CiAgICAgICAgICAgIC0gY29tcGxpYW5jZVR5cGU6IG11c3RoYXZlCiAgICAgICAgICAgICAgb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IGNvbnN0cmFpbnRzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgICAgICAgICAgICAgIHN0YXR1czoKICAgICAgICAgICAgICAgICAgdG90YWxWaW9sYXRpb25zOiAwCiAgICAtIG9iamVjdERlZmluaXRpb246CiAgICAgICAgYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCiAgICAgICAga2luZDogQ29uZmlndXJhdGlvblBvbGljeQogICAgICAgIG1ldGFkYXRhOgogICAgICAgICAgbmFtZTogcG9saWN5LWdhdGVrZWVwZXItYWRtaXNzaW9uLWxpdmVuZXNzCiAgICAgICAgc3BlYzoKICAgICAgICAgIHJlbWVkaWF0aW9uQWN0aW9uOiBpbmZvcm0gIyB3aWxsIGJlIG92ZXJyaWRkZW4gYnkgcmVtZWRpYXRpb25BY3Rpb24gaW4gcGFyZW50IHBvbGljeQogICAgICAgICAgc2V2ZXJpdHk6IGxvdwogICAgICAgICAgb2JqZWN0LXRlbXBsYXRlczoKICAgICAgICAgICAgLSBjb21wbGlhbmNlVHlwZTogbXVzdG5vdGhhdmUKICAgICAgICAgICAgICBvYmplY3REZWZpbml0aW9uOgogICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdjEKICAgICAgICAgICAgICAgIGtpbmQ6IEV2ZW50CiAgICAgICAgICAgICAgICBtZXRhZGF0YToKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBvcGVuc2hpZnQtZ2F0ZWtlZXBlci1zeXN0ZW0gIyBzZXQgaXQgdG8gdGhlIGFjdHVhbCBuYW1lc3BhY2Ugd2hlcmUgZ2F0ZWtlZXBlciBpcyBydW5uaW5nIGlmIGRpZmZlcmVudAogICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczoKICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50X2FjdGlvbjogZGVueQogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRfa2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRfbmFtZTogY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgICAgICAgICAgICAgIGV2ZW50X3R5cGU6IHZpb2xhdGlvbgotLS0KYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCmtpbmQ6IFBsYWNlbWVudEJpbmRpbmcKbWV0YWRhdGE6CiAgbmFtZTogYmluZGluZy1wb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6IHt9CnBsYWNlbWVudFJlZjoKICBuYW1lOiBwbGFjZW1lbnQtcG9saWN5LWdhdGVrZWVwZXItY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogIGtpbmQ6IFBsYWNlbWVudFJ1bGUKICBhcGlHcm91cDogYXBwcy5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pbwpzdWJqZWN0czoKICAtIG5hbWU6IHBvbGljeS1nYXRla2VlcGVyLWNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgIGtpbmQ6IFBvbGljeQogICAgYXBpR3JvdXA6IHBvbGljeS5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pbwotLS0KYXBpVmVyc2lvbjogYXBwcy5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pby92MQpraW5kOiBQbGFjZW1lbnRSdWxlCm1ldGFkYXRhOgogIG5hbWU6IHBsYWNlbWVudC1wb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6IHt9CnNwZWM6CiAgY2x1c3RlckNvbmRpdGlvbnM6CiAgICAtIHN0YXR1czogIlRydWUiCiAgICAgIHR5cGU6IE1hbmFnZWRDbHVzdGVyQ29uZGl0aW9uQXZhaWxhYmxlCiAgY2x1c3RlclNlbGVjdG9yOgogICAgbWF0Y2hFeHByZXNzaW9uczoKICAgICAgLSB7a2V5OiBlbnZpcm9ubWVudCwgb3BlcmF0b3I6IEluLCB2YWx1ZXM6IFsiZGV2Il19Cg==, integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEdCQUFCQ0FBd0ZpRUVJbnBMR1hSY1QwV2tWTzgyVSt5TUt1c3JLdUlGQW1BSVhGNFNISE5vYVdWc1pFQnkKWldSb1lYUXVZMjl0QUFvSkVGUHNqQ3JyS3lyaUUxTU1BSnV0d0R1QXpsTjkwekRJRlNpSlgxcnFpR3NYZWZOYwpFN3V0OS95NTZyTjByd3RmSTBkRnNaTkJhMERRd0xvVEkvQmMxaGZCSStqT09ZY2h0SDdWTHVUcm1LNkt6eVdTCk1tRGhXeGNmSXNHVFhCMTFRR0p2L1Y0S2xlZ2ZYMnRsNGhXLyt5c281YnNYV2tTRndzTEd2L2dwZitodWplemgKaGYvVTA2TitjaFlGaTQyL0FuWlRIaDhHUDdoZVo2NHM5TlBqcHJJU240dzdmYUtFVldoNzA1RlpCb0RZampUawpXcCtMMTE4OTNLS2RnV1ZnSElyZzZwa2R4eXpUcTZZejJHSDRvR0x4QnZ4eE9Cc1F4c1pHdDVRTUxHODhaRmpjCkpKVk0vUnZZQTBBTDVxVjFUazRRMG1zcy9xeDc2WEgrMEd1bTRma2xuWUdIT0pic0ZlWGorTFgvQTRNQkd0WFMKekdOSjBOQzI5c2FCNk9tNTlUQUgzUU5md1NyWUpRbXVKVjhsYTdhdHZnc00wT2REanNoMmVpYWU4bUx3TnoydApTaUt0dWw1MTdlRDRIWFVPWnloVGZvZ205azE4RHFvbVNpUGt1ZmJWWVE2SXBLT1VNSy9CY1p3bjdDQ0Q3WHhjCklzeFlLWE5jMVJwMEJ5ZUx4ZlZlOTlEeUpRcEl6eTV1cGc9PQo9T1BieAotLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS0K}
placementRef:
  name: placement-policy-gatekeeper-containerlivenessprobenotset
  kind: PlacementRule
  apiGroup: apps.open-cluster-management.io
subjects:
  - name: policy-gatekeeper-containerlivenessprobenotset
    kind: Policy
    apiGroup: policy.open-cluster-management.io
---
apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: placement-policy-gatekeeper-containerlivenessprobenotset
  annotations: {integrityshield.io/message: YXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCmtpbmQ6IFBvbGljeQptZXRhZGF0YToKICBuYW1lOiBwb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6CiAgICBwb2xpY3kub3Blbi1jbHVzdGVyLW1hbmFnZW1lbnQuaW8vc3RhbmRhcmRzOiBOSVNUIFNQIDgwMC01MwogICAgcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL2NhdGVnb3JpZXM6IENNIENvbmZpZ3VyYXRpb24gTWFuYWdlbWVudAogICAgcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL2NvbnRyb2xzOiBDTS0yIEJhc2VsaW5lIENvbmZpZ3VyYXRpb24Kc3BlYzoKICByZW1lZGlhdGlvbkFjdGlvbjogZW5mb3JjZQogIGRpc2FibGVkOiBmYWxzZQogIHBvbGljeS10ZW1wbGF0ZXM6CiAgICAtIG9iamVjdERlZmluaXRpb246CiAgICAgICAgYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCiAgICAgICAga2luZDogQ29uZmlndXJhdGlvblBvbGljeQogICAgICAgIG1ldGFkYXRhOgogICAgICAgICAgbmFtZTogcG9saWN5LWdhdGVrZWVwZXItY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgIHNwZWM6CiAgICAgICAgICByZW1lZGlhdGlvbkFjdGlvbjogZW5mb3JjZQogICAgICAgICAgc2V2ZXJpdHk6IGxvdwogICAgICAgICAgb2JqZWN0LXRlbXBsYXRlczoKICAgICAgICAgICAgLSBjb21wbGlhbmNlVHlwZTogbXVzdGhhdmUKICAgICAgICAgICAgICBvYmplY3REZWZpbml0aW9uOgogICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdGVtcGxhdGVzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29uc3RyYWludFRlbXBsYXRlCiAgICAgICAgICAgICAgICBtZXRhZGF0YToKICAgICAgICAgICAgICAgICAgY3JlYXRpb25UaW1lc3RhbXA6IG51bGwKICAgICAgICAgICAgICAgICAgbmFtZTogY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgICAgICAgICAgc3BlYzoKICAgICAgICAgICAgICAgICAgY3JkOgogICAgICAgICAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgICAgICAgICBuYW1lczoKICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgICB0YXJnZXRzOgogICAgICAgICAgICAgICAgICAgIC0gbGliczoKICAgICAgICAgICAgICAgICAgICAgICAgLSB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFja2FnZSBsaWIua29uc3RyYWludAoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGlzX2dhdGVrZWVwZXIgPSBmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19nYXRla2VlcGVyIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChpbnB1dCwgInJldmlldyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoaW5wdXQucmV2aWV3LCAib2JqZWN0IikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IGlucHV0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19nYXRla2VlcGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBpbnB1dC5yZXZpZXcub2JqZWN0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2dhdGVrZWVwZXIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdChtc2cpID0gZ2F0ZWtlZXBlcl9mb3JtYXQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZ2F0ZWtlZXBlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F0ZWtlZXBlcl9mb3JtYXQgPSB7Im1zZyI6IG1zZ30KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdChtc2cpID0gbXNnIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19nYXRla2VlcGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gb2JqZWN0Lm1ldGFkYXRhLm5hbWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAga2luZCA9IG9iamVjdC5raW5kCgogICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChvYmosIGZpZWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nX2ZpZWxkKG9iaiwgZmllbGQpID0gdHJ1ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbZmllbGRdID09ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nX2ZpZWxkKG9iaiwgZmllbGQpID0gdHJ1ZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaGFzX2ZpZWxkKG9iaiwgZmllbGQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zZXJ2aWNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJzZXJ2aWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RhdGVmdWxzZXQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa2luZCkgPT0gInN0YXRlZnVsc2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGFlbW9uc2V0IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJkYWVtb25zZXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kZXBsb3ltZW50IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJkZXBsb3ltZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcG9kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtpbmQpID09ICJwb2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19uYW1lc3BhY2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa2luZCkgPT0gIm5hbWVzcGFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3dvcmtsb2FkIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHBvZF9jb250YWluZXJzKHBvZCkgPSBhbGxfY29udGFpbmVycyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzID0geyJjb250YWluZXJzIiwgImluaXRDb250YWluZXJzIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb250YWluZXJzID0gW2MgfCBrZXlzW2tdOyBjID0gcG9kLnNwZWNba11bX11dCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJzW2NvbnRhaW5lcl0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfY29udGFpbmVycyA9IHBvZF9jb250YWluZXJzKHBvZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGFsbF9jb250YWluZXJzW19dCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJzW2NvbnRhaW5lcl0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX2NvbnRhaW5lcnMgPSBwb2RfY29udGFpbmVycyhvYmplY3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBhbGxfY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyX2ltYWdlc1tpbWFnZV0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyc1tjb250YWluZXJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IGNvbnRhaW5lci5pbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyX2ltYWdlc1tpbWFnZV0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBvYmplY3Quc3BlYy5pbWFnZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRfaW1hZ2UoaW1hZ2UpID0gW2ltYWdlLCAibGF0ZXN0Il0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGNvbnRhaW5zKGltYWdlLCAiOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdF9pbWFnZShpbWFnZSkgPSBbaW1hZ2VfbmFtZSwgdGFnXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW1hZ2VfbmFtZSwgdGFnXSA9IHNwbGl0KGltYWdlLCAiOiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RhdGVmdWxzZXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IG9iamVjdC5zcGVjLnRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGFlbW9uc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBvYmplY3Quc3BlYy50ZW1wbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2RlcGxveW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IG9iamVjdC5zcGVjLnRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcG9kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBvYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZXNbdm9sdW1lXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvbHVtZSA9IHBvZC5zcGVjLnZvbHVtZXNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiRSIpID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIlAiKSA9IDEwMDAwMDAwMDAwMDAwMDAwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJUIikgPSAxMDAwMDAwMDAwMDAwMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiRyIpID0gMTAwMDAwMDAwMDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIk0iKSA9IDEwMDAwMDAwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJrIikgPSAxMDAwMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiIikgPSAxMDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgibSIpID0gMSB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIktpIikgPSAxMDI0MDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiTWkiKSA9IDEwNDg1NzYwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJHaSIpID0gMTA3Mzc0MTgyNDAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoIlRpIikgPSAxMDk5NTExNjI3Nzc2MDAwIHsgdHJ1ZSB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZSgiUGkiKSA9IDExMjU4OTk5MDY4NDI2MjQwMDAgeyB0cnVlIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtX211bHRpcGxlKCJFaSIpID0gMTE1MjkyMTUwNDYwNjg0Njk3NjAwMCB7IHRydWUgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfc3VmZml4KG1lbSkgPSBzdWZmaXggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGlzX3N0cmluZyhtZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA+IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA6PSBzdWJzdHJpbmcobWVtLCBjb3VudChtZW0pIC0gMSwgLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1fbXVsdGlwbGUoc3VmZml4KQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3N1ZmZpeChtZW0pID0gc3VmZml4IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3N0cmluZyhtZW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudChtZW0pID4gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4IDo9IHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAyLCAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbV9tdWx0aXBsZShzdWZmaXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfc3VmZml4KG1lbSkgPSBzdWZmaXggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfc3RyaW5nKG1lbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50KG1lbSkgPiAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAxLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAyLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA9PSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgbWVtX211bHRpcGxlKHN1YnN0cmluZyhtZW0sIGNvdW50KG1lbSkgLSAxLCAtMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9zdWZmaXgobWVtKSA9IHN1ZmZpeCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19zdHJpbmcobWVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQobWVtKSA9PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X21lbShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19udW1iZXIob3JpZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyA6PSBvcmlnICogMTAwMAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pZnlfbWVtKG9yaWcpID0gbmV3IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBpc19udW1iZXIob3JpZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA6PSBnZXRfc3VmZml4KG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXcgOj0gcmVwbGFjZShvcmlnLCBzdWZmaXgsICIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVfbWF0Y2goIl5bMC05XSskIiwgcmF3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IDo9IHRvX251bWJlcihyYXcpICogbWVtX211bHRpcGxlKHN1ZmZpeCkKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X3N0b3JhZ2Uob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gb3JpZwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fub25pZnlfc3RvcmFnZShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggOj0gZ2V0X3N1ZmZpeChvcmlnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3IDo9IHJlcGxhY2Uob3JpZywgc3VmZml4LCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlX21hdGNoKCJeWzAtOV0rJCIsIHJhdykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyA6PSB0b19udW1iZXIocmF3KSAqIG1lbV9tdWx0aXBsZShzdWZmaXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmlmeV9jcHUob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gb3JpZyAqIDEwMDAKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhbm9uaWZ5X2NwdShvcmlnKSA9IG5ldyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaXNfbnVtYmVyKG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRzd2l0aChvcmlnLCAibSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gdG9fbnVtYmVyKHJlcGxhY2Uob3JpZywgIm0iLCAiIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmlmeV9jcHUob3JpZykgPSBuZXcgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGlzX251bWJlcihvcmlnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGVuZHN3aXRoKG9yaWcsICJtIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlX21hdGNoKCJeWzAtOV0rJCIsIG9yaWcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgOj0gdG9fbnVtYmVyKG9yaWcpICogMTAwMAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcHBlZF9jYXBhYmlsaXR5KGNvbnRhaW5lciwgY2FwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc2VjdXJpdHlDb250ZXh0LmNhcGFiaWxpdGllcy5kcm9wW19dID09IGNhcAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRfY2FwYWJpbGl0eShjb250YWluZXIsIGNhcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnNlY3VyaXR5Q29udGV4dC5jYXBhYmlsaXRpZXMuYWRkW19dID09IGNhcAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9fcmVhZF9vbmx5X2ZpbGVzeXN0ZW0oYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGhhc19maWVsZChjLCAic2VjdXJpdHlDb250ZXh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIG5vX3JlYWRfb25seV9maWxlc3lzdGVtKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19maWVsZChjLCAic2VjdXJpdHlDb250ZXh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBoYXNfZmllbGQoYy5zZWN1cml0eUNvbnRleHQsICJyZWFkT25seVJvb3RGaWxlc3lzdGVtIikKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZpbGVkZ2VfZXNjYWxhdGlvbl9hbGxvd2VkKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBoYXNfZmllbGQoYywgInNlY3VyaXR5Q29udGV4dCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2aWxlZGdlX2VzY2FsYXRpb25fYWxsb3dlZChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoYywgInNlY3VyaXR5Q29udGV4dCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfZmllbGQoYy5zZWN1cml0eUNvbnRleHQsICJhbGxvd1ByaXZpbGVnZUVzY2FsYXRpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLSB8LQogICAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2UgbGliLm9wZW5zaGlmdAoKICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIua29uc3RyYWludAoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19kZXBsb3ltZW50Y29uZmlnIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmFwaVZlcnNpb24pID09ICJhcHBzLm9wZW5zaGlmdC5pby92MSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmtpbmQpID09ICJkZXBsb3ltZW50Y29uZmlnIgogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcm91dGUgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXIoa29uc3RyYWludC5vYmplY3QuYXBpVmVyc2lvbikgPT0gInJvdXRlLm9wZW5zaGlmdC5pby92MSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyKGtvbnN0cmFpbnQub2JqZWN0LmtpbmQpID09ICJyb3V0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3dvcmtsb2FkX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGVwbG95bWVudGNvbmZpZwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfd29ya2xvYWRfa2luZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb25zdHJhaW50LmlzX3N0YXRlZnVsc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc193b3JrbG9hZF9raW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQuaXNfZGFlbW9uc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc193b3JrbG9hZF9raW5kIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQuaXNfZGVwbG95bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYWxsX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfd29ya2xvYWRfa2luZAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYWxsX2tpbmQgewogICAgICAgICAgICAgICAgICAgICAgICAgICAga29uc3RyYWludC5pc19zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpc19hbGxfa2luZCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19yb3V0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9kc1twb2RdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2RlcGxveW1lbnRjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvZCA9IGtvbnN0cmFpbnQub2JqZWN0LnNwZWMudGVtcGxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHBvZHNbcG9kXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2QgPSBrb25zdHJhaW50LnBvZHNbX10KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbY29udGFpbmVyXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2RzW3BvZF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb250YWluZXJzID0ga29uc3RyYWludC5wb2RfY29udGFpbmVycyhwb2QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBhbGxfY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyc1tjb250YWluZXJdIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGtvbnN0cmFpbnQuY29udGFpbmVyc1tfXQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHJlZ286IHwtCiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2Ugb2NwLmJlc3RwcmFjdGljZXMuY29udGFpbmVyX2xpdmVuZXNzcHJvYmVfbm90c2V0CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIua29uc3RyYWludAogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZGF0YS5saWIub3BlbnNoaWZ0CgogICAgICAgICAgICAgICAgICAgICAgICB2aW9sYXRpb25bbXNnXSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbnNoaWZ0LmlzX3dvcmtsb2FkX2tpbmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyIDo9IG9wZW5zaGlmdC5jb250YWluZXJzW19dCgogICAgICAgICAgICAgICAgICAgICAgICAgIGtvbnN0cmFpbnQubWlzc2luZ19maWVsZChjb250YWluZXIsICJsaXZlbmVzc1Byb2JlIikKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogOj0ga29uc3RyYWludC5vYmplY3QKCiAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnIDo9IGtvbnN0cmFpbnQuZm9ybWF0KHNwcmludGYoIiVzLyVzOiBjb250YWluZXIgJyVzJyBoYXMgbm8gbGl2ZW5lc3NQcm9iZS4gU2VlOiBodHRwczovL2RvY3Mub3BlbnNoaWZ0LmNvbS9jb250YWluZXItcGxhdGZvcm0vbGF0ZXN0L2FwcGxpY2F0aW9ucy9hcHBsaWNhdGlvbi1oZWFsdGguaHRtbCIsIFtvYmoua2luZCwgb2JqLm1ldGFkYXRhLm5hbWUsIGNvbnRhaW5lci5uYW1lXSkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogYWRtaXNzaW9uLms4cy5nYXRla2VlcGVyLnNoCiAgICAgICAgICAgIC0gY29tcGxpYW5jZVR5cGU6IG11c3RoYXZlCiAgICAgICAgICAgICAgb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IGNvbnN0cmFpbnRzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgICAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgICAgIG1hdGNoOgogICAgICAgICAgICAgICAgICAgIGtpbmRzOgogICAgICAgICAgICAgICAgICAgICAgLSBhcGlHcm91cHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgLSBhcHBzLm9wZW5zaGlmdC5pbwogICAgICAgICAgICAgICAgICAgICAgICAgIC0gYXBwcwogICAgICAgICAgICAgICAgICAgICAgICBraW5kczoKICAgICAgICAgICAgICAgICAgICAgICAgICAtIERlcGxveW1lbnRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAtIERhZW1vblNldAogICAgICAgICAgICAgICAgICAgICAgICAgIC0gRGVwbG95bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgIC0gU3RhdGVmdWxTZXQKICAgIC0gb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICBhcGlWZXJzaW9uOiBwb2xpY3kub3Blbi1jbHVzdGVyLW1hbmFnZW1lbnQuaW8vdjEKICAgICAgICBraW5kOiBDb25maWd1cmF0aW9uUG9saWN5CiAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICBuYW1lOiBwb2xpY3ktZ2F0ZWtlZXBlci1hdWRpdC1saXZlbmVzcwogICAgICAgIHNwZWM6CiAgICAgICAgICByZW1lZGlhdGlvbkFjdGlvbjogaW5mb3JtICMgd2lsbCBiZSBvdmVycmlkZGVuIGJ5IHJlbWVkaWF0aW9uQWN0aW9uIGluIHBhcmVudCBwb2xpY3kKICAgICAgICAgIHNldmVyaXR5OiBsb3cKICAgICAgICAgIG9iamVjdC10ZW1wbGF0ZXM6CiAgICAgICAgICAgIC0gY29tcGxpYW5jZVR5cGU6IG11c3RoYXZlCiAgICAgICAgICAgICAgb2JqZWN0RGVmaW5pdGlvbjoKICAgICAgICAgICAgICAgIGFwaVZlcnNpb246IGNvbnN0cmFpbnRzLmdhdGVrZWVwZXIuc2gvdjFiZXRhMQogICAgICAgICAgICAgICAga2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgbWV0YWRhdGE6CiAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgICAgICAgICAgICAgIHN0YXR1czoKICAgICAgICAgICAgICAgICAgdG90YWxWaW9sYXRpb25zOiAwCiAgICAtIG9iamVjdERlZmluaXRpb246CiAgICAgICAgYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCiAgICAgICAga2luZDogQ29uZmlndXJhdGlvblBvbGljeQogICAgICAgIG1ldGFkYXRhOgogICAgICAgICAgbmFtZTogcG9saWN5LWdhdGVrZWVwZXItYWRtaXNzaW9uLWxpdmVuZXNzCiAgICAgICAgc3BlYzoKICAgICAgICAgIHJlbWVkaWF0aW9uQWN0aW9uOiBpbmZvcm0gIyB3aWxsIGJlIG92ZXJyaWRkZW4gYnkgcmVtZWRpYXRpb25BY3Rpb24gaW4gcGFyZW50IHBvbGljeQogICAgICAgICAgc2V2ZXJpdHk6IGxvdwogICAgICAgICAgb2JqZWN0LXRlbXBsYXRlczoKICAgICAgICAgICAgLSBjb21wbGlhbmNlVHlwZTogbXVzdG5vdGhhdmUKICAgICAgICAgICAgICBvYmplY3REZWZpbml0aW9uOgogICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogdjEKICAgICAgICAgICAgICAgIGtpbmQ6IEV2ZW50CiAgICAgICAgICAgICAgICBtZXRhZGF0YToKICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBvcGVuc2hpZnQtZ2F0ZWtlZXBlci1zeXN0ZW0gIyBzZXQgaXQgdG8gdGhlIGFjdHVhbCBuYW1lc3BhY2Ugd2hlcmUgZ2F0ZWtlZXBlciBpcyBydW5uaW5nIGlmIGRpZmZlcmVudAogICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczoKICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50X2FjdGlvbjogZGVueQogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRfa2luZDogQ29udGFpbmVyTGl2ZW5lc3Nwcm9iZU5vdHNldAogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRfbmFtZTogY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogICAgICAgICAgICAgICAgICAgIGV2ZW50X3R5cGU6IHZpb2xhdGlvbgotLS0KYXBpVmVyc2lvbjogcG9saWN5Lm9wZW4tY2x1c3Rlci1tYW5hZ2VtZW50LmlvL3YxCmtpbmQ6IFBsYWNlbWVudEJpbmRpbmcKbWV0YWRhdGE6CiAgbmFtZTogYmluZGluZy1wb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6IHt9CnBsYWNlbWVudFJlZjoKICBuYW1lOiBwbGFjZW1lbnQtcG9saWN5LWdhdGVrZWVwZXItY29udGFpbmVybGl2ZW5lc3Nwcm9iZW5vdHNldAogIGtpbmQ6IFBsYWNlbWVudFJ1bGUKICBhcGlHcm91cDogYXBwcy5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pbwpzdWJqZWN0czoKICAtIG5hbWU6IHBvbGljeS1nYXRla2VlcGVyLWNvbnRhaW5lcmxpdmVuZXNzcHJvYmVub3RzZXQKICAgIGtpbmQ6IFBvbGljeQogICAgYXBpR3JvdXA6IHBvbGljeS5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pbwotLS0KYXBpVmVyc2lvbjogYXBwcy5vcGVuLWNsdXN0ZXItbWFuYWdlbWVudC5pby92MQpraW5kOiBQbGFjZW1lbnRSdWxlCm1ldGFkYXRhOgogIG5hbWU6IHBsYWNlbWVudC1wb2xpY3ktZ2F0ZWtlZXBlci1jb250YWluZXJsaXZlbmVzc3Byb2Jlbm90c2V0CiAgYW5ub3RhdGlvbnM6IHt9CnNwZWM6CiAgY2x1c3RlckNvbmRpdGlvbnM6CiAgICAtIHN0YXR1czogIlRydWUiCiAgICAgIHR5cGU6IE1hbmFnZWRDbHVzdGVyQ29uZGl0aW9uQXZhaWxhYmxlCiAgY2x1c3RlclNlbGVjdG9yOgogICAgbWF0Y2hFeHByZXNzaW9uczoKICAgICAgLSB7a2V5OiBlbnZpcm9ubWVudCwgb3BlcmF0b3I6IEluLCB2YWx1ZXM6IFsiZGV2Il19Cg==, integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEdCQUFCQ0FBd0ZpRUVJbnBMR1hSY1QwV2tWTzgyVSt5TUt1c3JLdUlGQW1BSVhGNFNISE5vYVdWc1pFQnkKWldSb1lYUXVZMjl0QUFvSkVGUHNqQ3JyS3lyaUUxTU1BSnV0d0R1QXpsTjkwekRJRlNpSlgxcnFpR3NYZWZOYwpFN3V0OS95NTZyTjByd3RmSTBkRnNaTkJhMERRd0xvVEkvQmMxaGZCSStqT09ZY2h0SDdWTHVUcm1LNkt6eVdTCk1tRGhXeGNmSXNHVFhCMTFRR0p2L1Y0S2xlZ2ZYMnRsNGhXLyt5c281YnNYV2tTRndzTEd2L2dwZitodWplemgKaGYvVTA2TitjaFlGaTQyL0FuWlRIaDhHUDdoZVo2NHM5TlBqcHJJU240dzdmYUtFVldoNzA1RlpCb0RZampUawpXcCtMMTE4OTNLS2RnV1ZnSElyZzZwa2R4eXpUcTZZejJHSDRvR0x4QnZ4eE9Cc1F4c1pHdDVRTUxHODhaRmpjCkpKVk0vUnZZQTBBTDVxVjFUazRRMG1zcy9xeDc2WEgrMEd1bTRma2xuWUdIT0pic0ZlWGorTFgvQTRNQkd0WFMKekdOSjBOQzI5c2FCNk9tNTlUQUgzUU5md1NyWUpRbXVKVjhsYTdhdHZnc00wT2REanNoMmVpYWU4bUx3TnoydApTaUt0dWw1MTdlRDRIWFVPWnloVGZvZ205azE4RHFvbVNpUGt1ZmJWWVE2SXBLT1VNSy9CY1p3bjdDQ0Q3WHhjCklzeFlLWE5jMVJwMEJ5ZUx4ZlZlOTlEeUpRcEl6eTV1cGc9PQo9T1BieAotLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS0K}
spec:
  clusterConditions:
    - status: "True"
      type: ManagedClusterConditionAvailable
  clusterSelector:
    matchExpressions:
      - {key: environment, operator: In, values: ["dev"]}
